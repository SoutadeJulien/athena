<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>athena.AtCore &mdash; Athena 01.12.23 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=451d5c0a"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Athena
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">athena</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Athena</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">athena.AtCore</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for athena.AtCore</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">abc</span>
<span class="kn">import</span> <span class="nn">cProfile</span>
<span class="kn">import</span> <span class="nn">enum</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">numbers</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pstats</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">tempfile</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">cached_property</span>
<span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">ModuleType</span><span class="p">,</span> <span class="n">FunctionType</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">Iterator</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">,</span> <span class="n">Sequence</span>

<span class="kn">from</span> <span class="nn">athena</span> <span class="kn">import</span> <span class="n">AtConstants</span><span class="p">,</span> <span class="n">AtExceptions</span><span class="p">,</span> <span class="n">AtStatus</span><span class="p">,</span> <span class="n">AtUtils</span>


<div class="viewcode-block" id="Event">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Event">[docs]</a>
<span class="k">class</span> <span class="nc">Event</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A simple event system for handling callbacks.</span>

<span class="sd">    This class allows you to create an event object that can be called like a function.</span>
<span class="sd">    Registered callbacks will be invoked when the event is called.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes an Event with a given name.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            name: The name of the event.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Invokes all registered callbacks with the provided arguments.&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">callback</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span><span class="p">:</span>
            <span class="n">callback</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="Event.addCallback">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Event.addCallback">[docs]</a>
    <span class="k">def</span> <span class="nf">addCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a callback function to the event&#39;s list of callbacks.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            callback: The callback function to be registered.</span>

<span class="sd">        Return:</span>
<span class="sd">            True if the callback was successfully registered, False otherwise.</span>

<span class="sd">        Warnings:</span>
<span class="sd">            If the provided callback is not callable, a warning message is logged,</span>
<span class="sd">            and the callback is not registered.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="n">AtUtils</span><span class="o">.</span><span class="n">LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s1">&#39;Event &quot;</span><span class="si">{0}</span><span class="s1">&quot; failed to register callback: Object &quot;</span><span class="si">{1}</span><span class="s1">&quot; is not callable.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_callbacks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span></div>
</div>



<div class="viewcode-block" id="EventSystem">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.EventSystem">[docs]</a>
<span class="k">class</span> <span class="nc">EventSystem</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Athena&#39;s internal event system.</span>

<span class="sd">    This class defines events that can be used to notify subscribers</span>
<span class="sd">    when specific events occur within the base framework.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">#: Event triggered when a new Register instance is created.</span>
    <span class="n">RegisterCreated</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="s1">&#39;RegisterCreated&#39;</span><span class="p">)</span>

    <span class="c1">#: Event triggered when Blueprints are reloaded.</span>
    <span class="n">BlueprintsReloaded</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="s1">&#39;BlueprintsReloaded&#39;</span><span class="p">)</span>

    <span class="c1">#: Event triggered when development mode is enabled.</span>
    <span class="n">DevModeEnabled</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="s1">&#39;DevModeEnabled&#39;</span><span class="p">)</span>

    <span class="c1">#: Event triggered when development mode is disabled.</span>
    <span class="n">DevModeDisabled</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="s1">&#39;DevModeDisabled&#39;</span><span class="p">)</span></div>



<div class="viewcode-block" id="AtSession">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.AtSession">[docs]</a>
<span class="k">class</span> <span class="nc">AtSession</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">AtUtils</span><span class="o">.</span><span class="n">Singleton</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Singleton class representing the Athena&#39;s running session.</span>

<span class="sd">    This class provides a single instance that manages the session state,</span>
<span class="sd">    including a registration system and a development mode toggle.</span>
<span class="sd">    </span>
<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; AtSession().dev = True  # Enable development mode.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a new instance of __AtSession.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dev</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1">#TODO: Remove this code or update it for blueprint import 2.0</span>
    <span class="c1"># @cached_property</span>
    <span class="c1"># def environVar(self):</span>
    <span class="c1">#     return &#39;{program}_{software}&#39;.format(</span>
    <span class="c1">#         program=AtConstants.PROGRAM_NAME.upper(), </span>
    <span class="c1">#         software=self.software.upper()</span>
    <span class="c1">#     ) </span>

    <span class="c1"># @cached_property</span>
    <span class="c1"># def environ(self):</span>
    <span class="c1">#     if self.environVar in os.environ:</span>
    <span class="c1">#         return os.environ[self.environVar]</span>

    <span class="c1">#     os.environ[self.environVar] = &#39;&#39;</span>
    <span class="c1">#     if self.platform in (&#39;Linux&#39;, &#39;Darwin&#39;):</span>
    <span class="c1">#         os.system(&#39;export {}={}&#39;.format(self.environVar, &#39;&#39;))</span>
    <span class="c1">#     elif self.platform == &#39;Windows&#39;:</span>
    <span class="c1">#         os.system(&#39;setx {} {}&#39;.format(self.environVar, &#39;&#39;))</span>

    <span class="c1">#     return os.environ[self.environVar]</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Register</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazily creates and returns the Register.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">Register</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dev</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the current state of development mode.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dev</span>

    <span class="nd">@dev</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">dev</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the development mode state and trigger corresponding events.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_dev</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">EventSystem</span><span class="o">.</span><span class="n">DevModeEnabled</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">EventSystem</span><span class="o">.</span><span class="n">DevModeDisabled</span><span class="p">()</span></div>



<span class="c1">#TODO: When Python 3.10 will be more widely used according to vfxplatform, add slots.</span>
<div class="viewcode-block" id="ProtoFeedback">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.ProtoFeedback">[docs]</a>
<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">ProtoFeedback</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract base dataclass for Feedback objects used in Athena.</span>

<span class="sd">    This is the root of all feedback types and only meant to implement common behavior</span>
<span class="sd">    between all subclasses.</span>
<span class="sd">    It implement the default attributes and behavior for iteration.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">feedback</span><span class="p">:</span> <span class="n">Any</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the data held by the feedback instance, which can be of any type based on</span>
<span class="sd">    the specific needs of the associated process.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">selectable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">compare</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determines whether the feedback is selectable. This attribute is not used in comparison,</span>
<span class="sd">    meaning two instances with the same data (:attr:`~ProtoFeedback.feedback`) will be considered</span>
<span class="sd">    similar, regardless of the `selectable` value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">children</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ProtoFeedback</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="nb">hash</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">compare</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Holds references to all child feedback instances. Unlike the feedback itself, this attribute</span>
<span class="sd">    is mutable, and as such, it is not considered in comparison, hashing, or sorting.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over all children&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">child</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the string representation of the feedback data.&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">feedback</span><span class="p">)</span>

<div class="viewcode-block" id="ProtoFeedback.select">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.ProtoFeedback.select">[docs]</a>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Abstract method to select the feedback item.</span>

<span class="sd">        Raise:</span>
<span class="sd">            NotImplementedError: This method must be implemented by subclasses.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>


<div class="viewcode-block" id="ProtoFeedback.deselect">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.ProtoFeedback.deselect">[docs]</a>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">deselect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Abstract method to deselect the feedback item.</span>

<span class="sd">        Raise:</span>
<span class="sd">            NotImplementedError: This method must be implemented by subclasses.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>


<div class="viewcode-block" id="ProtoFeedback.parent">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.ProtoFeedback.parent">[docs]</a>
    <span class="k">def</span> <span class="nf">parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">feedbacks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ProtoFeedback</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add child feedback items to create a hierarchical structure.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            *feedbacks: Child feedback items to be added.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">feedbacks</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="FeedbackContainer">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.FeedbackContainer">[docs]</a>
<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">FeedbackContainer</span><span class="p">(</span><span class="n">ProtoFeedback</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class for Feedback Container containing feedbacks for a specific Thread.</span>

<span class="sd">    The FeedbackContainer is only meant to be used as a root for a Feedback hierarchy,</span>
<span class="sd">    compared to other feedback, it&#39;s &quot;data&quot; is a Thread, for which it contains feedbacks.</span>
<span class="sd">    It&#39;s also able to have a status, that must be set based on the Thread FailStatus or </span>
<span class="sd">    SuccessStatus.</span>
<span class="sd">    </span>
<span class="sd">    Notes:</span>
<span class="sd">        The FeedbackContainer class implement a really basic selection and deselection process,</span>
<span class="sd">        you should consider reimplemting it if you intend to use a very specific selection mechanism</span>
<span class="sd">        or need to deal with advanced selection/deselection. (= A lot of elements to deal with)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">feedback</span><span class="p">:</span> <span class="n">Thread</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The FeedbackContainer data must be the Thread for which it contain feedbacks.&quot;&quot;&quot;</span>

    <span class="n">status</span><span class="p">:</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">Status</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The FeedbackContainer status represent the result state of the Thread based on the contained feedbacks&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Simply return the title for the container&#39;s Thread&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">feedback</span><span class="o">.</span><span class="n">_title</span>

<div class="viewcode-block" id="FeedbackContainer.select">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.FeedbackContainer.select">[docs]</a>
    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">replace</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow selection for the FeedbackContainer.</span>

<span class="sd">        If it isn&#39;t selectable, this won&#39;t do anything. On the other hand, if it is,</span>
<span class="sd">        the behavior is to call the `select` method for each Feedback in the container&#39;s children one by one.</span>
<span class="sd">        Also, if `replace` is set to `True`, only the first child will replace the current selection</span>
<span class="sd">        while others will be added to it.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            replace: Whether we replace or add to the current selection.</span>

<span class="sd">        Return:</span>
<span class="sd">            The current state of the `replace` parameter to know if following selection, in subclass</span>
<span class="sd">            implementation of this method must replace or add.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectable</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">replace</span>
            
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="n">child</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">replace</span><span class="o">=</span><span class="n">replace</span><span class="p">)</span>
            <span class="n">replace</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="n">replace</span></div>


<div class="viewcode-block" id="FeedbackContainer.deselect">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.FeedbackContainer.deselect">[docs]</a>
    <span class="k">def</span> <span class="nf">deselect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow deselection for the FeedbackContainer.</span>

<span class="sd">        If it isn&#39;t selectable, this won&#39;t do anything. Otherwise, call the `deselect` method</span>
<span class="sd">        of each child Feedback, one by one.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectable</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="n">child</span><span class="o">.</span><span class="n">deselect</span><span class="p">()</span></div>


<div class="viewcode-block" id="FeedbackContainer.setStatus">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.FeedbackContainer.setStatus">[docs]</a>
    <span class="k">def</span> <span class="nf">setStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span><span class="n">AtStatus</span><span class="o">.</span><span class="n">Status</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the current FeedbackContainer status to the given status.</span>

<span class="sd">        Parameter:</span>
<span class="sd">            status: The new status to set this FeedbackContainer value to.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="Feedback">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Feedback">[docs]</a>
<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">Feedback</span><span class="p">(</span><span class="n">ProtoFeedback</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class representing a single found Feedback for Athena.</span>

<span class="sd">    The Feedback is an abstract way for Processes to register what they find.</span>
<span class="sd">    This class serves as the base Feedback class, suitable for most situations but includes no</span>
<span class="sd">    specific behavior for software/OS selection. The methods implement behavior, not actual selection</span>
<span class="sd">    actions. If you need real selection, consider implementing a subclass and overriding the select/deselect</span>
<span class="sd">    methods. Using this Base Feedback as the parent for other subclassed feedback will cascade the selection</span>
<span class="sd">    to them.</span>

<span class="sd">    Notes:</span>
<span class="sd">        For DCC-specific implementations, refer to :mod:`athena.software`. The list is not exhaustive and emphasizes</span>
<span class="sd">        common and global behavior. If you have specific needs for another software or pipeline-specific behavior,</span>
<span class="sd">        you can implement your own Feedback subclass.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Feedback.select">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Feedback.select">[docs]</a>
    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">replace</span><span class="p">:</span><span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow selection for the Feedback.</span>

<span class="sd">        This implementation is a selection cascade mechanism meant to be overridden and/or called as a superclass.</span>
<span class="sd">        If the feedback is selectable, it won&#39;t do anything, as there are no defined selection behaviors for</span>
<span class="sd">        the default Feedback. If the Feedback is not selectable, it cascades to every child and calls their</span>
<span class="sd">        select method one by one.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            replace: Whether to replace or add to the current selection.</span>

<span class="sd">        Notes:</span>
<span class="sd">            Having a non-selectable feedback can allow displaying data that has no selection capabilities</span>
<span class="sd">            or create a group for sub-feedbacks and select them all at once.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectable</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="n">child</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">replace</span><span class="o">=</span><span class="n">replace</span><span class="p">)</span>
                <span class="n">replace</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="n">replace</span></div>


<div class="viewcode-block" id="Feedback.deselect">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Feedback.deselect">[docs]</a>
    <span class="k">def</span> <span class="nf">deselect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow deselection for the Feedback.</span>

<span class="sd">        This implementation is a deselection cascade mechanism meant to be overridden and/or called as a superclass.</span>
<span class="sd">        If the feedback is deselectable, it won&#39;t do anything, as there are no defined deselection behaviors for</span>
<span class="sd">        the default Feedback. If the Feedback is not deselectable, it cascades to every child and calls their</span>
<span class="sd">        deselect method one by one.</span>

<span class="sd">        Notes:</span>
<span class="sd">            Having a non-selectable feedback can allow displaying data that has no deselection capabilities</span>
<span class="sd">            or create a group for sub-feedbacks and deselect them all at once.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectable</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="n">child</span><span class="o">.</span><span class="n">deselect</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="Thread">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Thread">[docs]</a>
<span class="k">class</span> <span class="nc">Thread</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represent a task within an Athena Process.</span>

<span class="sd">    A Thread in Athena signifies a single responsibility task assigned to a Process. Each Thread</span>
<span class="sd">    entails the responsibility for the Process to perform tests and register Feedbacks if any unexpected</span>
<span class="sd">    behavior is detected.</span>
<span class="sd">    </span>
<span class="sd">    The Thread encapsulates the task, defining its importance by specifying both failure and success statuses.</span>
<span class="sd">    The fail status denotes failure, and the success status indicates successful completion.</span>
<span class="sd">    </span>
<span class="sd">    These statuses can be overridden in the Blueprint for enhanced flexibility. It is essential to generate</span>
<span class="sd">    the Thread with its default and common statuses.</span>
<span class="sd">    </span>
<span class="sd">    Threads should be defined as class attributes in the Process and passed to methods that handle feedbacks.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">&#39;_title&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;_defaultFailStatus&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;_failStatus&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;_defaultSuccessStatus&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;_successStatus&#39;</span><span class="p">,</span>
        <span class="s1">&#39;_documentation&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">failStatus</span><span class="p">:</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">FailStatus</span> <span class="o">=</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">ERROR</span><span class="p">,</span> <span class="n">successStatus</span><span class="p">:</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">SuccessStatus</span> <span class="o">=</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">,</span> <span class="n">documentation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize an instance of Thread.</span>

<span class="sd">        This method sets up a Thread instance with the provided parameters, including the thread title,</span>
<span class="sd">        default fail and success statuses, and an optional documentation. Their default values are different from their</span>
<span class="sd">        actual value.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            title: The title of the Thread.</span>
<span class="sd">            failStatus: The default fail status for the command, will be set as failStatus and defaultFailStatus.</span>
<span class="sd">            successStatus:The default success status for the command, will be set as successStatus and defaultSuccessStatus</span>
<span class="sd">            documentation: Optional documentation or description for the Thread.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AtExceptions.StatusException: If the provided failStatus or successStatus are not of the valid type.</span>

<span class="sd">        Notes:</span>
<span class="sd">            The failStatus and successStatus parameters should be members of the AtStatus.FailStatus and</span>
<span class="sd">            AtStatus.SuccessStatus enumerations, respectively. If not provided, the default statuses are</span>
<span class="sd">            set to AtStatus.ERROR and AtStatus.SUCCESS, respectively.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">failStatus</span><span class="p">,</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">FailStatus</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AtExceptions</span><span class="o">.</span><span class="n">StatusException</span><span class="p">(</span><span class="s1">&#39;`</span><span class="si">{}</span><span class="s1">` is not a valid fail status.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">failStatus</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">successStatus</span><span class="p">,</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">SuccessStatus</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">AtExceptions</span><span class="o">.</span><span class="n">StatusException</span><span class="p">(</span><span class="s1">&#39;`</span><span class="si">{}</span><span class="s1">` is not a valid success status.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">successStatus</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_title</span> <span class="o">=</span> <span class="n">title</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_defaultFailStatus</span> <span class="o">=</span> <span class="n">failStatus</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_failStatus</span> <span class="o">=</span> <span class="n">failStatus</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_defaultSuccessStatus</span> <span class="o">=</span> <span class="n">successStatus</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_successStatus</span> <span class="o">=</span> <span class="n">successStatus</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_documentation</span> <span class="o">=</span> <span class="n">documentation</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">title</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Thread&#39;s title.</span>

<span class="sd">        Return:</span>
<span class="sd">            The thread&#39;s title.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_title</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">failStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">FailStatus</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Thread&#39;s fail status.</span>

<span class="sd">        Return:</span>
<span class="sd">            The thread&#39;s fail status.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_failStatus</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">successStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">SuccessStatus</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Thread&#39;s success status.</span>

<span class="sd">        Return:</span>
<span class="sd">            The thread&#39;s success status..</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_successStatus</span>

<div class="viewcode-block" id="Thread.overrideFailStatus">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Thread.overrideFailStatus">[docs]</a>
    <span class="k">def</span> <span class="nf">overrideFailStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">FailStatus</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Override the actual fail status.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            status: The Status class to use as new fail status.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_failStatus</span> <span class="o">=</span> <span class="n">status</span></div>


<div class="viewcode-block" id="Thread.overrideSuccessStatus">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Thread.overrideSuccessStatus">[docs]</a>
    <span class="k">def</span> <span class="nf">overrideSuccessStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">:</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">SuccessStatus</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Override the actual success status.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            status: The Status class to use as new success status.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_successStatus</span> <span class="o">=</span> <span class="n">status</span></div>


<div class="viewcode-block" id="Thread.status">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Thread.status">[docs]</a>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">Status</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the Thread&#39;s current status based on given state boolean.</span>

<span class="sd">        Return:</span>
<span class="sd">            Success status if `state` is true, fail status otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">state</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_successStatus</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_failStatus</span></div>
</div>



<span class="c1">#TODO: On a major update, replace individual process computation with process that subscribe to iteration.</span>
<span class="c1"># e.g. AtPolygonIterator -&gt; Iterate over polygons of a mesh and notify subscribers.</span>
<div class="viewcode-block" id="Process">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process">[docs]</a>
<span class="k">class</span> <span class="nc">Process</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract class that serves as the foundation for all Athena Processes.</span>

<span class="sd">    The `Process` class acts as the base (abstract) class for all user-defined check processes within the Athena framework.</span>
<span class="sd">    To create a new process, it&#39;s essential to define at least one :class:`~Thread` object as a class attribute. These threads</span>
<span class="sd">    manage various feedbacks that the process will inspect and potentially address.</span>

<span class="sd">    During the execution of your process&#39;s :meth:`~Process.check`, if any issues are detected, you need to create </span>
<span class="sd">    instances of the :class:`~Feedback` class (or its subclasses) and register them for the appropriate threads using </span>
<span class="sd">    the :meth:`~Process.addFeedback` method. In the :meth:`~Process.fix` method, iterate over these feedback </span>
<span class="sd">    instances and implement any necessary actions to automatically resolve fixable issues.</span>
<span class="sd">    </span>
<span class="sd">    Additional methods for managing internal feedback are available, allowing you to retrieve feedbacks, iterate over them,</span>
<span class="sd">    or check if there are any feedbacks for a specific Thread.</span>

<span class="sd">    At the end of the check process, it&#39;s crucial to set the state for each Thread. By default, they are all set to the</span>
<span class="sd">    :const:`.AtStatus._DEFAULT` built-in status. To change a Thread status, you can call the :meth:`~Process.setSuccess`</span>
<span class="sd">    or :meth:`~Process.setFail` methods.</span>
<span class="sd">    Alternatively, you can skip the execution of a specific Thread using the :meth:`~Process.setSkipped` method.</span>

<span class="sd">    Three non-implemented methods must or can be overridden to create a functional process:</span>

<span class="sd">        * :meth:`~Process.check`</span>
<span class="sd">        * :meth:`~Process.fix`</span>
<span class="sd">        * :meth:`~Process.tool`</span>

<span class="sd">    Communication of progress can be achieved using the `setProgress*` methods to provide feedback to the user on the</span>
<span class="sd">    current state of the check or fix progress. For this to work, a QProgressBar must be set using `setProgressBar`.</span>

<span class="sd">    Several sunder attributes are defined at the class level, providing the ability to replace default class data. For example,</span>
<span class="sd">    defining `_name_` gives a name to the process different from the class name obtained from `__name__`. This allows defining</span>
<span class="sd">    a user-friendly name. The currently available sunder attributes include:</span>

<span class="sd">        * `_name_`</span>
<span class="sd">        * `_doc_`</span>

<span class="sd">    If you wish to create a custom base class for all your processes, ensure that this base class also inherits from `Process`</span>
<span class="sd">    to be recognized by Athena&#39;s framework. Do not override the `__new__` method without using `super`, or the process will not</span>
<span class="sd">    be set up as intended.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">FEEDBACK_CONTAINER_CLASS</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">FeedbackContainer</span><span class="p">]</span> <span class="o">=</span> <span class="n">FeedbackContainer</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Define which type of feedback container will be internally used to register Feedback per Thread.</span>
<span class="sd">    This is intended to be overrided in a subclass if you&#39;re willing to use a different FeedbackContainer implementation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_name_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The Process nice name. If not set, will be set to the value of __name__&quot;&quot;&quot;</span>

    <span class="n">_doc_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The Process user&#39;s documentation. If not set, will be set to the value of __doc__&quot;&quot;&quot;</span>

    <span class="n">_listenForUserInteruption</span><span class="p">:</span> <span class="n">Event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="s1">&#39;ListenForUserInteruption&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Event that allow to notify subscribers when the user is trying to interupt the process execution.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">Process</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new instance of the Process class.</span>

<span class="sd">        This method overrides the default `__new__` method and is responsible for initializing a new instance </span>
<span class="sd">        of the class with some private attribute used internally.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Create the instance</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">Process</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Instance internal data (Must not be altered by user)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">_feedbackContainer</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Thread</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">FeedbackContainer</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">__makeFeedbackContainer</span><span class="p">()</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">__progressbar</span><span class="p">:</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QProgressBar</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">instance</span><span class="o">.</span><span class="n">__doInterupt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># Sunder instance attribute (Can be overrided user to custom the process)</span>
        <span class="c1"># instance._name_ = cls._name_ or cls.__name__</span>
        <span class="c1"># instance._doc_ = cls._doc_ or cls.__doc__</span>

        <span class="k">return</span> <span class="n">instance</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Give a nice representation of the Process with it&#39;s nice name.&quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="s1">&#39;&lt;Process `</span><span class="si">{0}</span><span class="s1">` at </span><span class="si">{1}</span><span class="s1">&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name_</span><span class="p">,</span> <span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">__makeFeedbackContainer</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Thread</span><span class="p">,</span> <span class="n">FeedbackContainer</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and initialize a dictionary of :class:`~FeedbackContainers` for each :class:`~Thread`.</span>

<span class="sd">        This class method generates a dictionary of FeedbackContainers for each Thread associated with the Process class.</span>
<span class="sd">        The FeedbackContainers are initialized with the Thread, True (indicating the container is selectable),</span>
<span class="sd">        and :const:`~.AtStatus._DEFAULT` (the default status for the containers).</span>

<span class="sd">        Return:</span>
<span class="sd">            A new dict with an empty FeedbackContainer per Thread with status set to :const:`.AtStatus._DEFAULT`</span>

<span class="sd">        Note:</span>
<span class="sd">            This method is typically used internally within the Process class to initialize the FeedbackContainers for</span>
<span class="sd">            each associated Thread.</span>

<span class="sd">        See Also:</span>

<span class="sd">            * :class:`~Thread`: The class representing a task within the Athena framework.</span>
<span class="sd">            * :class:`~FeedbackContainer`: The container for managing feedback associated with a specific Thread.</span>
<span class="sd">            * :const:`~AtStatus._DEFAULT`: The default status used when initializing FeedbackContainers.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">{</span><span class="n">thread</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">FEEDBACK_CONTAINER_CLASS</span><span class="p">(</span><span class="n">thread</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">_DEFAULT</span><span class="p">)</span> <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">threads</span><span class="p">()}</span>

<div class="viewcode-block" id="Process.threads">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.threads">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">threads</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Thread</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterator to access all threads of the Process.</span>
<span class="sd">        </span>
<span class="sd">        Return:</span>
<span class="sd">            Each thread instances for the current Process.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">member</span><span class="p">,</span> <span class="n">Thread</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">member</span></div>


<div class="viewcode-block" id="Process.check">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.check">[docs]</a>
    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method must be implemented on all Process to register feedbacks and set status for each threads&quot;&quot;&quot;</span>
        <span class="o">...</span></div>

        
<div class="viewcode-block" id="Process.fix">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.fix">[docs]</a>
    <span class="k">def</span> <span class="nf">fix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method can be implemented to allow an automatic fix for all feedbacks retrieved by the Process check.&quot;&quot;&quot;</span>
        <span class="o">...</span></div>


<div class="viewcode-block" id="Process.tool">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.tool">[docs]</a>
    <span class="k">def</span> <span class="nf">tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method can be implemented to open a window that can allow the user to manually find or fix the errors.&quot;&quot;&quot;</span>
        <span class="o">...</span></div>


<div class="viewcode-block" id="Process.setProgressbar">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.setProgressbar">[docs]</a>
    <span class="k">def</span> <span class="nf">setProgressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progressBar</span><span class="p">:</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QProgressBar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This method should be used to setup the Process progress bar widget.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            progressBar: The new progress bar to link to The Process instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__progressbar</span> <span class="o">=</span> <span class="n">progressBar</span></div>


<div class="viewcode-block" id="Process.setProgress">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.setProgress">[docs]</a>
    <span class="k">def</span> <span class="nf">setProgress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the progress value and/or text for the associated QProgressBar.</span>

<span class="sd">        This method allows setting the progress value and/or text for the QProgressBar associated with the Process instance.</span>
<span class="sd">        It is typically used to provide feedback to the user on the current state of the check or fix progress.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            value: The progress value to set. If None, the progress value remains unchanged.</span>
<span class="sd">            text: The progress text to set. If None, the progress text remains unchanged.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setProgressValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setProgressText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>


<div class="viewcode-block" id="Process.setProgressValue">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.setProgressValue">[docs]</a>
    <span class="k">def</span> <span class="nf">setProgressValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the progress value of the Process progress bar if exist.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            value: The value to set the progress to.</span>

<span class="sd">        Raise:</span>
<span class="sd">            TypeError: If `value` is not numeric.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__progressbar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1">#WATCHME: `numbers.Number` is an abstract base class that define operations progressively, the first call to</span>
        <span class="c1"># this method will define it for the first time, this is why the profiler can detect some more calls for the</span>
        <span class="c1"># first call of the first process to be run. --&gt; We talk about insignifiant time but the displayed data will</span>
        <span class="c1"># be a bit different. see: https://docs.python.org/2/library/numbers.html</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Argument `value` is not numeric&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">value</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__progressbar</span><span class="o">.</span><span class="n">value</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__progressbar</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">))</span></div>


<div class="viewcode-block" id="Process.setProgressText">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.setProgressText">[docs]</a>
    <span class="k">def</span> <span class="nf">setProgressText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the label text of the Process progress bar if exist.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            text: Text to display in the progressBar.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__progressbar</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">text</span> <span class="ow">and</span> <span class="n">text</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__progressbar</span><span class="o">.</span><span class="n">text</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__progressbar</span><span class="o">.</span><span class="n">setFormat</span><span class="p">(</span><span class="n">AtConstants</span><span class="o">.</span><span class="n">PROGRESSBAR_FORMAT</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">text</span><span class="p">))</span></div>


<div class="viewcode-block" id="Process.clearFeedback">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.clearFeedback">[docs]</a>
    <span class="k">def</span> <span class="nf">clearFeedback</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear all feedback associated with the threads in the process.</span>

<span class="sd">        This method resets the feedback containers for each thread by creating new instances of FeedbackContainers.</span>
<span class="sd">        It effectively clears any previously registered feedback.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_feedbackContainer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__makeFeedbackContainer</span><span class="p">()</span></div>


<div class="viewcode-block" id="Process.hasFeedback">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.hasFeedback">[docs]</a>
    <span class="k">def</span> <span class="nf">hasFeedback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if there is feedback registered for a specific thread.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            thread: The thread to check for feedback.</span>

<span class="sd">        Return:</span>
<span class="sd">            True if there is feedback for the specified thread, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_feedbackContainer</span><span class="p">[</span><span class="n">thread</span><span class="p">]</span><span class="o">.</span><span class="n">children</span><span class="p">)</span></div>


<div class="viewcode-block" id="Process.addFeedback">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.addFeedback">[docs]</a>
    <span class="k">def</span> <span class="nf">addFeedback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">:</span> <span class="n">Thread</span><span class="p">,</span> <span class="n">feedback</span><span class="p">:</span> <span class="n">Feedback</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add feedback to the specified thread&#39;s feedback container.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            thread: The thread to which the feedback will be added.</span>
<span class="sd">            feedback: The feedback instance to add.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_feedbackContainer</span><span class="p">[</span><span class="n">thread</span><span class="p">]</span><span class="o">.</span><span class="n">parent</span><span class="p">(</span><span class="n">feedback</span><span class="p">)</span></div>


<div class="viewcode-block" id="Process.iterFeedback">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.iterFeedback">[docs]</a>
    <span class="k">def</span> <span class="nf">iterFeedback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">:</span> <span class="n">Thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Feedback</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Iterate over the feedback instances registered for a specific thread.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            thread: The thread for which to iterate over feedback.</span>

<span class="sd">        Return:</span>
<span class="sd">            An iterator over the feedback instances for the specified thread.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_feedbackContainer</span><span class="p">[</span><span class="n">thread</span><span class="p">]</span><span class="o">.</span><span class="n">children</span><span class="p">)</span></div>


<div class="viewcode-block" id="Process.feedbackCount">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.feedbackCount">[docs]</a>
    <span class="k">def</span> <span class="nf">feedbackCount</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">:</span> <span class="n">Thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the count of feedback instances registered for a specific thread.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            thread: The thread for which to get the feedback count.</span>

<span class="sd">        Return:</span>
<span class="sd">            The number of feedback instances for the specified thread.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_feedbackContainer</span><span class="p">[</span><span class="n">thread</span><span class="p">]</span><span class="o">.</span><span class="n">children</span><span class="p">)</span></div>


<div class="viewcode-block" id="Process.getFeedbackContainers">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.getFeedbackContainers">[docs]</a>
    <span class="k">def</span> <span class="nf">getFeedbackContainers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">FeedbackContainer</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a tuple of all feedback containers associated with the threads.</span>

<span class="sd">        Return:</span>
<span class="sd">            A tuple containing all feedback containers associated with the threads.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_feedbackContainer</span><span class="o">.</span><span class="n">values</span><span class="p">())</span></div>


<div class="viewcode-block" id="Process.setSuccess">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.setSuccess">[docs]</a>
    <span class="k">def</span> <span class="nf">setSuccess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">:</span> <span class="n">Thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the success status for a specific thread&#39;s feedback container.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            thread: The thread for which to set the success status.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_feedbackContainer</span><span class="p">[</span><span class="n">thread</span><span class="p">]</span><span class="o">.</span><span class="n">setStatus</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">status</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span></div>


<div class="viewcode-block" id="Process.setFail">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.setFail">[docs]</a>
    <span class="k">def</span> <span class="nf">setFail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">:</span> <span class="n">Thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the fail status for a specific thread&#39;s feedback container.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            thread: The thread for which to set the fail status.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_feedbackContainer</span><span class="p">[</span><span class="n">thread</span><span class="p">]</span><span class="o">.</span><span class="n">setStatus</span><span class="p">(</span><span class="n">thread</span><span class="o">.</span><span class="n">status</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span></div>


<div class="viewcode-block" id="Process.setSkipped">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.setSkipped">[docs]</a>
    <span class="k">def</span> <span class="nf">setSkipped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">thread</span><span class="p">:</span> <span class="n">Thread</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the skipped status for a specific thread&#39;s feedback container.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            thread: The thread for which to set the skipped status.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_feedbackContainer</span><span class="p">[</span><span class="n">thread</span><span class="p">]</span><span class="o">.</span><span class="n">setStatus</span><span class="p">(</span><span class="n">AtStatus</span><span class="o">.</span><span class="n">_SKIPPED</span><span class="p">)</span></div>


<div class="viewcode-block" id="Process.listenForUserInteruption">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process.listenForUserInteruption">[docs]</a>
    <span class="k">def</span> <span class="nf">listenForUserInteruption</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Trigger an user interuption Event to prematurely end process execution.</span>

<span class="sd">        This method triggers the :attr:`~Process._listenForUserInteruption` Event, which requires a registered callback</span>
<span class="sd">        to invoke the :meth:`~Process._registerInteruption` method from the Qt Application.</span>

<span class="sd">        After triggering the event, if there is a callback to invoke the appropriate method, the boolean value</span>
<span class="sd">        for :obj:`~Process.__doInterupt` will be set to True, and an :exc:`.AtExceptions.AtProcessExecutionInterrupted` </span>
<span class="sd">        exception will be raised. This exception can be handle in the Qt Application to force the Process Status to </span>
<span class="sd">        :const:`.AtStatus._ABORTED`.</span>

<span class="sd">        Raises:</span>
<span class="sd">            AtExceptions.AtProcessExecutionInterrupted: If the interruption is caught and propagated.</span>

<span class="sd">        Important:</span>
<span class="sd">            When the Process is executing, the Qt Event System stacks QEvents, processing them at the end of the</span>
<span class="sd">            execution, typically after all process executions are finished. To catch user interactions during</span>
<span class="sd">            execution, the Qt Event System must process pending events. The :attr:`~Process._listenForUserInteruption`</span>
<span class="sd">            Event can trigger a call to `QApplication.processEvents`, accomplished by adding it as a callback for this </span>
<span class="sd">            Event.</span>

<span class="sd">            When this method runs, the callbacks are triggered, allowing the processing of pending interactions, such as a key</span>
<span class="sd">            press. A side effect is that the key press becomes part of the Qt UI thread.</span>

<span class="sd">            To ensure the raise directly impacts the application and ends the process, it must be done from the main thread.</span>
<span class="sd">            Therefore, the :meth:`~Process._registerInteruption` method needs to be called from the Qt Application to</span>
<span class="sd">            toggle the behavior of this method so it can raise. Typically, this method is called in the check or fix </span>
<span class="sd">            method, ensuring that the raise occurs from the main thread.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__doInterupt</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_listenForUserInteruption</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__doInterupt</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__doInterupt</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">raise</span> <span class="n">AtExceptions</span><span class="o">.</span><span class="n">AtProcessExecutionInterrupted</span><span class="p">()</span></div>


<div class="viewcode-block" id="Process._registerInteruption">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Process._registerInteruption">[docs]</a>
    <span class="k">def</span> <span class="nf">_registerInteruption</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Change the value for the private member :attr:`~Process.__doInterupt` to True.</span>
<span class="sd">        </span>
<span class="sd">        This simply allow to change the value of this private member from outside the class.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__doInterupt</span> <span class="o">=</span> <span class="kc">True</span></div>
</div>



<div class="viewcode-block" id="Register">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Register">[docs]</a>
<span class="k">class</span> <span class="nc">Register</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The register is a container that allow the user to load and manage blueprints.</span>

<span class="sd">    After initialisation the register will not contain any data and you will need to load the :class:`~Blueprint` you </span>
<span class="sd">    want for your current Athena Session.</span>
<span class="sd">    The role of the register is to act as a loader and data keeper for all existing Blueprints you defined and want your</span>
<span class="sd">    user&#39;s to be able to use for their sanity checking.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the Register&#39;s internal data.&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">__blueprints</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Blueprint</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_currentBlueprint</span><span class="p">:</span> <span class="n">Blueprint</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">EventSystem</span><span class="o">.</span><span class="n">RegisterCreated</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow to check if the register is empty or not based on the loaded blueprints.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__blueprint</span><span class="p">)</span>

    <span class="n">__nonzero__</span> <span class="o">=</span> <span class="fm">__bool__</span>

    <span class="c1">#FIXME: The import system is not easy to use, find a better way to use them.</span>
    <span class="c1">#TODO: Find a way to implement this feature and clean the import process.</span>
    <span class="c1"># def loadBlueprintFromPythonStr(self, pythonCode, moduleName):</span>
    <span class="c1">#     module = AtUtils.moduleFromStr(pythonCode, name=moduleName)</span>
    <span class="c1">#     self.loadBlueprintFromModule(Blueprint(module))</span>

<div class="viewcode-block" id="Register.loadBlueprintsFromPackageStr">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Register.loadBlueprintsFromPackageStr">[docs]</a>
    <span class="k">def</span> <span class="nf">loadBlueprintsFromPackageStr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">package</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load blueprints from a package name.</span>

<span class="sd">        This method calls the loadBlueprintsFromPackage method with the imported package object.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            package: The python formatted path of the package to load blueprints from.</span>

<span class="sd">        Warning:</span>
<span class="sd">            This method is **deprectated** as it suppose a specific hierarchy, a feature inherited from</span>
<span class="sd">            the early ages of Athena. You&#39;re not supposed to have a specific hierarchy in you packages</span>
<span class="sd">            to load their blueprints.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">loadBlueprintsFromPackage</span><span class="p">(</span><span class="n">AtUtils</span><span class="o">.</span><span class="n">importFromStr</span><span class="p">(</span><span class="n">package</span><span class="p">))</span></div>


<div class="viewcode-block" id="Register.loadBlueprintsFromPackage">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Register.loadBlueprintsFromPackage">[docs]</a>
    <span class="k">def</span> <span class="nf">loadBlueprintsFromPackage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">package</span><span class="p">:</span> <span class="n">ModuleType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load blueprints from a package object.</span>

<span class="sd">        This method iterates over the blueprints paths in the package and calls the loadBlueprintFromModulePath </span>
<span class="sd">        method for each one.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            package: The package object to load blueprints from.</span>

<span class="sd">        Warning:</span>
<span class="sd">            This method is #deprectated** as it suppose a specific hierarchy, a feature inherited from</span>
<span class="sd">            the early ages of Athena. You&#39;re not supposed to have a specific hierarchy in you packages</span>
<span class="sd">            to load their blueprints.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">modulePath</span> <span class="ow">in</span> <span class="n">AtUtils</span><span class="o">.</span><span class="n">iterBlueprintsPath</span><span class="p">(</span><span class="n">package</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loadBlueprintFromModulePath</span><span class="p">(</span><span class="n">modulePath</span><span class="p">)</span></div>


<div class="viewcode-block" id="Register.loadBlueprintFromModulePath">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Register.loadBlueprintFromModulePath">[docs]</a>
    <span class="k">def</span> <span class="nf">loadBlueprintFromModulePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modulePath</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a blueprint from a module OS path.</span>

<span class="sd">        This method converts the module path to a python import path and load blueprints from it..</span>

<span class="sd">        Parameters:</span>
<span class="sd">            modulePath: The path of the module to load a blueprint from.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">loadBlueprintFromPythonImportPath</span><span class="p">(</span><span class="n">AtUtils</span><span class="o">.</span><span class="n">pythonImportPathFromPath</span><span class="p">(</span><span class="n">modulePath</span><span class="p">))</span></div>


<div class="viewcode-block" id="Register.loadBlueprintFromPythonImportPath">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Register.loadBlueprintFromPythonImportPath">[docs]</a>
    <span class="k">def</span> <span class="nf">loadBlueprintFromPythonImportPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">importStr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a blueprint from a module python&#39;s import path.</span>

<span class="sd">        This method will import the module from the string and load blueprints from it.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            importStr: The python import path to the Blueprint&#39;s module to load.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">loadBlueprintFromModule</span><span class="p">(</span><span class="n">AtUtils</span><span class="o">.</span><span class="n">importFromStr</span><span class="p">(</span><span class="n">importStr</span><span class="p">))</span></div>


<div class="viewcode-block" id="Register.loadBlueprintFromModule">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Register.loadBlueprintFromModule">[docs]</a>
    <span class="k">def</span> <span class="nf">loadBlueprintFromModule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module</span><span class="p">:</span> <span class="n">ModuleType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a blueprint from a module object.</span>

<span class="sd">        This method creates a Blueprint object from the module and adds it to the list of blueprints. </span>
<span class="sd">        If a blueprint with the same name already exists, it replaces it with the new one.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            module: The module object to load a blueprint from.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">newBlueprint</span> <span class="o">=</span> <span class="n">Blueprint</span><span class="p">(</span><span class="n">module</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">blueprint</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__blueprints</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">blueprint</span> <span class="o">==</span> <span class="n">newBlueprint</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__blueprints</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">newBlueprint</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__blueprints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newBlueprint</span><span class="p">)</span></div>


<div class="viewcode-block" id="Register.clear">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Register.clear">[docs]</a>
    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove all loaded blueprints from this register.&quot;&quot;&quot;</span>

        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__blueprints</span><span class="p">[:]</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">blueprints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Blueprint</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for Register&#39;s blueprints</span>
<span class="sd">        </span>
<span class="sd">        Return:</span>
<span class="sd">            All blueprints in the current register.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__blueprints</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">currentBlueprint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Blueprint</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for current blueprint.</span>
<span class="sd">        </span>
<span class="sd">        Return:</span>
<span class="sd">            The current blueprint.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentBlueprint</span>

    <span class="nd">@currentBlueprint</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">currentBlueprint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">blueprint</span><span class="p">:</span> <span class="n">Blueprint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Setter for current blueprint</span>

<span class="sd">        Set the current blueprint if it&#39;s an already registered blueprint recognized by the register.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            blueprint: The new Blueprint to set as current blueprint.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">blueprint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__blueprints</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_currentBlueprint</span> <span class="o">=</span> <span class="n">blueprint</span>

<div class="viewcode-block" id="Register.blueprintByName">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Register.blueprintByName">[docs]</a>
    <span class="k">def</span> <span class="nf">blueprintByName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Blueprint</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a blueprints from the Register based on it&#39;s name.</span>

<span class="sd">        Will try to find the first Blueprint that match the given name. If none are found, nothing is returned.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            name: The name of the blueprint to find.</span>

<span class="sd">        Return:</span>
<span class="sd">            The blueprint that match the name, or None if no blueprint match the given name.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">blueprint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__blueprints</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">blueprint</span><span class="o">.</span><span class="n">_name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">blueprint</span></div>


<div class="viewcode-block" id="Register.reload">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Register.reload">[docs]</a>
    <span class="k">def</span> <span class="nf">reload</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear the currently loaded blueprints and reload them to ensure all blueprints are up to date.</span>
<span class="sd">        </span>
<span class="sd">        This is mostly intended for development usage, as users are not likely to update the Blueprints.</span>
<span class="sd">        It&#39;s the same are reloading the blueprints, but as they are hold in objects inside a list, they need</span>
<span class="sd">        to be rebuilt with the newly loaded instance of the module.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">blueprints</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__blueprints</span><span class="p">[:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">blueprint</span> <span class="ow">in</span> <span class="n">blueprints</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">processor</span> <span class="ow">in</span> <span class="n">blueprint</span><span class="o">.</span><span class="n">processors</span><span class="p">:</span>
                <span class="n">AtUtils</span><span class="o">.</span><span class="n">reloadModule</span><span class="p">(</span><span class="n">processor</span><span class="o">.</span><span class="n">module</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">loadBlueprintFromModule</span><span class="p">(</span><span class="n">AtUtils</span><span class="o">.</span><span class="n">reloadModule</span><span class="p">(</span><span class="n">blueprint</span><span class="o">.</span><span class="n">_module</span><span class="p">))</span>

        <span class="n">EventSystem</span><span class="o">.</span><span class="n">BlueprintsReloaded</span><span class="p">()</span></div>
</div>



<span class="c1">#TODO: Maybe make this a subclass of types.ModuleType and wrap class creation.</span>
<div class="viewcode-block" id="Blueprint">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Blueprint">[docs]</a>
<span class="k">class</span> <span class="nc">Blueprint</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for Athena processes, specifying order and settings.</span>

<span class="sd">    The Blueprint serves as a configuration for Athena processes, defining the order in which processes are executed and</span>
<span class="sd">    providing settings for each process. It requires two members to be defined in the module:</span>

<span class="sd">        * `header`: A list of names in the desired execution order, representing the sequence of processes.</span>
<span class="sd">        * `descriptions`: A dictionary where each value in the `header` contains data to initialize a :class:`~Processor`.</span>

<span class="sd">    An optional member called `settings` can be added, which must be a dictionary as well. The values in this dictionary </span>
<span class="sd">    modify the global execution behavior for the current blueprint.</span>

<span class="sd">    The Blueprint lazily loads all its data on demand to minimize initialization calls. For example, processors are not</span>
<span class="sd">    created until the :meth:`~Blueprint.processors` attribute is called.</span>

<span class="sd">    Notes:</span>
<span class="sd">        The name of a processor is based on the name of its module.</span>
<span class="sd">        Data can be stored on a Blueprint using the `setData` method. This allows storing pre-existing widgets or any</span>
<span class="sd">        other type of data.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">module</span><span class="p">:</span> <span class="n">ModuleType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the blueprint object by defining it&#39;s attributes&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_module</span> <span class="o">=</span> <span class="n">module</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">module</span><span class="o">.</span><span class="vm">__file__</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">module</span><span class="o">.</span><span class="vm">__name__</span>

    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Allow to deteremine if the blueprint contains processors or not.</span>

<span class="sd">        Return:</span>
<span class="sd">            True if the blueprint contain at least one processor else False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processors</span><span class="p">)</span>

    <span class="n">__nonzero__</span> <span class="o">=</span> <span class="fm">__bool__</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make the Blueprint hashable based on it&#39;s module file path.</span>

<span class="sd">        Return:</span>
<span class="sd">            The hash for the blueprint&#39;s module file path.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_module</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Blueprint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Support for logical comparison `equal`.</span>
<span class="sd">        </span>
<span class="sd">        Two Blueprints are considered similar if they are based on the same file.</span>

<span class="sd">        Return:</span>
<span class="sd">            Whether the current and other blueprints are based on the same module.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Blueprint</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span><span class="o">.</span><span class="vm">__file__</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_module</span><span class="o">.</span><span class="vm">__file__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Blueprint&#39;s name.</span>
<span class="sd">        </span>
<span class="sd">        Return:</span>
<span class="sd">            The Blueprint&#39;s name.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">module</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModuleType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Blueprint&#39;s module</span>
<span class="sd">        </span>
<span class="sd">        Return:</span>
<span class="sd">            The Blueprint&#39;s module.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_module</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Blueprint&#39;s module file path.</span>

<span class="sd">        Return:</span>
<span class="sd">            The blueprint&#39;s module file path.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_module</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span>

    <span class="nd">@cached_property</span>    
    <span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Blueprint&#39;s icon path.</span>

<span class="sd">        Return:</span>
<span class="sd">            The Blueprint&#39;s icon path.</span>

<span class="sd">        Notes:</span>
<span class="sd">            The icon must be a `.png` file in the same folder as the Blueprint&#39;s module.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">file</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">.png&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">))</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">header</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Blueprint&#39;s header.</span>

<span class="sd">        Return:</span>
<span class="sd">            The value for the `header` attribute in the Blueprint&#39;s module or an empty Tuple.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_module</span><span class="p">,</span> <span class="s1">&#39;header&#39;</span><span class="p">,</span> <span class="p">())</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">descriptions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Blueprint&#39;s descriptions.</span>

<span class="sd">        Return:</span>
<span class="sd">            The value for the `descriptions` attribute in the Blueprint&#39;s module or an empty dict.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_module</span><span class="p">,</span> <span class="s1">&#39;descriptions&#39;</span><span class="p">,</span> <span class="p">{})</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Blueprint&#39;s descriptions.</span>

<span class="sd">        Return:</span>
<span class="sd">            The value for the `settings` attribute in the Blueprint&#39;s module or an empty dict.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_module</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">,</span> <span class="p">{})</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">processors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Processor</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Blueprint&#39;s processors.</span>
<span class="sd">        </span>
<span class="sd">        This will create all the processors from the Blueprint&#39;s decsriptions ordered based on the header and will </span>
<span class="sd">        automatically resolve the links for each description in case this is meant to be used in batch.</span>

<span class="sd">        Return:</span>
<span class="sd">            A tuple containing all :class:`~Processor` for the current Blueprint&#39;s description.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">batchLinkResolve</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">processorObjects</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">id_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">id_</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">descriptions</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">processor</span> <span class="o">=</span> <span class="n">Processor</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">descriptions</span><span class="p">[</span><span class="n">id_</span><span class="p">],</span> <span class="n">settings</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">settings</span><span class="p">)</span>

            <span class="n">processorObjects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">processor</span><span class="p">)</span>
            <span class="n">batchLinkResolve</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="o">=</span> <span class="n">processor</span> <span class="k">if</span> <span class="n">processor</span><span class="o">.</span><span class="n">inBatch</span> <span class="k">else</span> <span class="kc">None</span>
        
        <span class="c1"># Default resolve for descriptions if available in batch, call the `resolveLinks` method from descriptions to change the targets functions.</span>
        <span class="k">for</span> <span class="n">processor</span> <span class="ow">in</span> <span class="n">processorObjects</span><span class="p">:</span>
            <span class="n">processor</span><span class="o">.</span><span class="n">resolveLinks</span><span class="p">(</span><span class="n">batchLinkResolve</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="n">AtConstants</span><span class="o">.</span><span class="n">CHECK</span><span class="p">,</span> <span class="n">fix</span><span class="o">=</span><span class="n">AtConstants</span><span class="o">.</span><span class="n">FIX</span><span class="p">,</span> <span class="n">tool</span><span class="o">=</span><span class="n">AtConstants</span><span class="o">.</span><span class="n">TOOL</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">processorObjects</span><span class="p">)</span>

<div class="viewcode-block" id="Blueprint.processorByName">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Blueprint.processorByName">[docs]</a>
    <span class="k">def</span> <span class="nf">processorByName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Processor</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find a processor from blueprint&#39;s processors based on it&#39;s name.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            name: The name of the processor to find.</span>

<span class="sd">        Return:</span>
<span class="sd">            The processor that match the name, or None if no processor match the given name.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">processor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processors</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">processor</span><span class="o">.</span><span class="n">moduleName</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">processor</span></div>
</div>



<div class="viewcode-block" id="Tag">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Tag">[docs]</a>
<span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">IntFlag</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tags are modifiers used by athena to affect the way a process behavior. </span>
<span class="sd">    </span>
<span class="sd">    Tags are defined in the :class:`~Blueprint` and will be parsed by the :class:`~Processor` which will change </span>
<span class="sd">    it&#39;s configuration based on them.</span>
<span class="sd">    The :class:`~Process` by itself is totaly unaware of it&#39;s Tags as they are only used by it&#39;s wrapper, the Processor.</span>
<span class="sd">    </span>
<span class="sd">    Tags allow Process to be optional, non blocking, hide their checks or even be completely disabled or dependant to</span>
<span class="sd">    another Process using Link.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">NO_TAG</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This is used as default, representing the absence of any tag&quot;&quot;&quot;</span>

    <span class="n">DISABLED</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Define if a process should be disabled (by default it is enabled)&quot;&quot;&quot;</span>

    <span class="n">NO_CHECK</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This tag will remove the check of a process, it will force the isCheckable to False in blueprint.&quot;&quot;&quot;</span>

    <span class="n">NO_FIX</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This tag will remove the fix of a process, it will force the isFixable to False in blueprint.&quot;&quot;&quot;</span>

    <span class="n">NO_TOOL</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This tag will remove the tool of a process, it will force the hasTool to False in blueprint.&quot;&quot;&quot;</span>

    <span class="n">NON_BLOCKING</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A non blocking process will raise a non blocking error, its error is ignored.&quot;&quot;&quot;</span>
    
    <span class="n">NO_BATCH</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This process will only be executed in ui.&quot;&quot;&quot;</span>

    <span class="n">NO_UI</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">enum</span><span class="o">.</span><span class="n">auto</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This process will only be executed in batch.&quot;&quot;&quot;</span>
    
    <span class="n">OPTIONAL</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">NON_BLOCKING</span> <span class="o">|</span> <span class="n">DISABLED</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This tag will set a check optional, an optional process is not checked by default and will.&quot;&quot;&quot;</span>

    <span class="n">DEPENDANT</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">NO_CHECK</span> <span class="o">|</span> <span class="n">NO_FIX</span> <span class="o">|</span> <span class="n">NO_TOOL</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A dependent process need links to be run through another process.&quot;&quot;&quot;</span></div>



<div class="viewcode-block" id="Link">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Link">[docs]</a>
<span class="k">class</span> <span class="nc">Link</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Give access to sentinel objects for each kind of link.&quot;&quot;&quot;</span>

    <span class="n">CHECK</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represent the link to or from a Process&#39; check method&quot;&quot;&quot;</span>

    <span class="n">FIX</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represent the link to or from a Process&#39; fix method&quot;&quot;&quot;</span>

    <span class="n">TOOL</span><span class="p">:</span> <span class="nb">object</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represent the link to or from a Process&#39; tool method&quot;&quot;&quot;</span></div>



<div class="viewcode-block" id="Processor">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor">[docs]</a>
<span class="k">class</span> <span class="nc">Processor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Proxy object representing a :class:`~Process` configured from a :class:`~Blueprint` description.</span>

<span class="sd">    The `Processor` is constructed based on a Python import string, responsible for instantiating and managing a specific </span>
<span class="sd">    Process.</span>
<span class="sd">    It requires essential data typically specified in a Blueprint&#39;s description. The class internally determines the </span>
<span class="sd">    implemented methods on the Process class, setting up attributes to describe available functionalities.</span>

<span class="sd">    In addition, the `Processor` resolves Tags and slightly overrides the initial Process behavior (e.g., removing `fix`,</span>
<span class="sd">    disabling the Process in batch mode). This adds flexibility to the framework by allowing customization of the Process&#39;s </span>
<span class="sd">    behavior.</span>

<span class="sd">    The implementation of the `Processor` class is predominantly lazy, initializing only the necessary arguments during </span>
<span class="sd">    instantiation and deferring expensive computation until they are actually needed, while caching their results. </span>
<span class="sd">    The `Processor` takes on the responsibility of resolving all :class:`~Tag`, :class:`~Link`, and </span>
<span class="sd">    :class:`~AtStatus.Status` overrides for all Process&#39; :class:`~Thread`. Additionally, it can be made aware of </span>
<span class="sd">    :class:`~Blueprint` settings through the `setting` argument or receive extra data for later use.</span>

<span class="sd">    Overall, the `Processor` plays a pivotal role in configuring and executing Processes defined in a Blueprint, contributing </span>
<span class="sd">    to the framework&#39;s flexibility and ease of use. Whether it&#39;s for using them in a UI or batch.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
        <span class="n">process</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
        <span class="n">category</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
        <span class="n">arguments</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
        <span class="n">tags</span><span class="p">:</span> <span class="n">Tag</span> <span class="o">=</span> <span class="n">Tag</span><span class="o">.</span><span class="n">NO_TAG</span><span class="p">,</span>
        <span class="n">links</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Link</span><span class="p">,</span> <span class="n">Link</span><span class="p">],</span> <span class="o">...</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">statusOverrides</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">AtStatus</span><span class="o">.</span><span class="n">Status</span><span class="p">],</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">Status</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Init the Processor instances attributes and define all the default values. The tags will also be resolved.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            process: The python path to import the process from, it must be a full import path to the Process class.</span>
<span class="sd">            category: The name of the category of the Processor, if no value are provided the category will be `AtConstants.DEFAULT_CATEGORY` (default: `None`)</span>
<span class="sd">            arguments: This dict must contain by method name (&#39;__init__&#39;, &#39;check&#39;, ...) a tuple containing a tuple for the args and </span>
<span class="sd">                a dict for the keyword arguments.</span>
<span class="sd">            tags: The tag is an integer where bytes refers to `athena.AtCore.Tags`, it must be made of one or more tags. (default: `None`)</span>
<span class="sd">            links: The links must contain an ordered sequence of tuple with the name of another Process of the same blueprint, and two </span>
<span class="sd">                Links that are the source and the target methods to connect.</span>
<span class="sd">            statusOverride: Status overrides must be a dict with name of process Thread as key (str) and a dict with `AtStatus.FailStatus` or</span>
<span class="sd">                `AtStatus.SuccessStatus` as key (possibly both) and the status for the override as value. (default: `None`)</span>
<span class="sd">            settings: Setting is a dict that contain data as value for each setting name as key. (default: `None`)</span>
<span class="sd">            **kwargs: All remaining data passed at initialisation will automatically be used to init the Processor data.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_processStrPath</span> <span class="o">=</span> <span class="n">process</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_category</span> <span class="o">=</span> <span class="n">category</span> <span class="ow">or</span> <span class="n">AtConstants</span><span class="o">.</span><span class="n">DEFAULT_CATEGORY</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_arguments</span> <span class="o">=</span> <span class="n">arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span> <span class="o">=</span> <span class="n">tags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_links</span> <span class="o">=</span> <span class="n">links</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_statusOverrides</span> <span class="o">=</span> <span class="n">statusOverrides</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span> <span class="o">=</span> <span class="n">settings</span> <span class="ow">or</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__linksData</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Link</span><span class="p">,</span> <span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">Link</span><span class="o">.</span><span class="n">CHECK</span><span class="p">:</span> <span class="p">[],</span> <span class="n">Link</span><span class="o">.</span><span class="n">FIX</span><span class="p">:</span> <span class="p">[],</span> <span class="n">Link</span><span class="o">.</span><span class="n">TOOL</span><span class="p">:</span> <span class="p">[]}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__isEnabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__isNonBlocking</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__inUi</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__inBatch</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># -- We setup the tags because this process is really fast and does not require to be lazy.</span>
        <span class="c1"># This also give access to more data without the need to build the process instance.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setupTags</span><span class="p">()</span>

        <span class="c1"># -- Declare a blueprint internal data, these data are directly retrieved from blueprint&#39;s non built-in keys.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_processProfile</span><span class="p">:</span> <span class="n">_ProcessProfile</span> <span class="o">=</span> <span class="n">_ProcessProfile</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Readable representation of the Processor object</span>

<span class="sd">        Returns:</span>
<span class="sd">            A readable representation of the Processor based on it&#39;s process import path and id.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="s1">&#39;&lt;</span><span class="si">{0}</span><span class="s1"> `</span><span class="si">{1}</span><span class="s1">` at </span><span class="si">{2}</span><span class="s1">&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processStrPath</span><span class="o">.</span><span class="n">rpartition</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="nb">hex</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">moduleName</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Processor&#39;s Process module name.</span>
<span class="sd">        </span>
<span class="sd">        Return:</span>
<span class="sd">            The Processor&#39;s Process module name.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processStrPath</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">module</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ModuleType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter that import the Processor&#39;s Process module.</span>

<span class="sd">        Return:</span>
<span class="sd">            The Processor&#39;s Process module object that was imported.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">AtUtils</span><span class="o">.</span><span class="n">importProcessModuleFromPath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_processStrPath</span><span class="p">)</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">processClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Processor&#39;s Process class</span>

<span class="sd">        Return:</span>
<span class="sd">            The Processor&#39;s Process class</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processStrPath</span><span class="o">.</span><span class="n">rpartition</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">])</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Type</span><span class="p">[</span><span class="n">Process</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Processor&#39;s Process class</span>

<span class="sd">        Return:</span>
<span class="sd">            An initialised instance of the Processor&#39;s Process class.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">initArgs</span><span class="p">,</span> <span class="n">initKwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getArguments</span><span class="p">(</span><span class="s1">&#39;__init__&#39;</span><span class="p">)</span>
        <span class="n">process</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processClass</span><span class="p">(</span><span class="o">*</span><span class="n">initArgs</span><span class="p">,</span> <span class="o">**</span><span class="n">initKwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_overrideStatus</span><span class="p">(</span><span class="n">process</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_statusOverrides</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">process</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Parameter</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter Processor&#39;s Process&#39; Parameters.</span>

<span class="sd">        Return:</span>
<span class="sd">            All Parameters objects for the Processor&#39;s Process.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">parameters</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processClass</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="n">Parameter</span><span class="p">):</span>
                <span class="n">parameters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">overridedMethods</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the overrided methods of the Processor&#39;s Process class.</span>

<span class="sd">        Return:</span>
<span class="sd">            List of name for each overrided method on the Processor&#39;s Process class compared to :class:`~Process`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">AtUtils</span><span class="o">.</span><span class="n">getOverridedMethods</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processClass</span><span class="p">,</span> <span class="n">Process</span><span class="p">)</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">niceName</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Processor&#39;s Process nice name.</span>

<span class="sd">        Return:</span>
<span class="sd">            A nice name for the Processor&#39;s Process, split if on camelCase.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">AtUtils</span><span class="o">.</span><span class="n">camelCaseSplit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rawName</span><span class="p">)</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">docstring</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter for the Processor&#39;s Process docstring</span>

<span class="sd">        Use the value in the Processor&#39;s :attr:`~Process._doc_` attribute, if it&#39;s empty, use class docstring</span>
<span class="sd">        :attr:`~Process.__doc__`. If it&#39;s also empty, fallback on :const:`~.AtConstants.NO_DOCUMENTATION_AVAILABLE`</span>

<span class="sd">        Returns:</span>
<span class="sd">            The formatted docstring to be more readable and also display the path of the process.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">docstring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processClass</span><span class="o">.</span><span class="n">_doc_</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">processClass</span><span class="o">.</span><span class="vm">__doc__</span> <span class="ow">or</span> <span class="n">AtConstants</span><span class="o">.</span><span class="n">NO_DOCUMENTATION_AVAILABLE</span>
        <span class="n">docstring</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> </span><span class="si">{0}</span><span class="s1"> &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_processStrPath</span><span class="p">)</span>

        <span class="n">docFormat</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\{(\w+)\}&#39;</span><span class="p">,</span> <span class="n">docstring</span><span class="p">):</span>
            <span class="n">matchStr</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">docFormat</span><span class="p">[</span><span class="n">matchStr</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processClass</span><span class="o">.</span><span class="n">_docFormat_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">matchStr</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">docstring</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">**</span><span class="n">docFormat</span><span class="p">)</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">hasCheckMethod</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter to know if the Processor&#39;s Process has a `check` method.</span>

<span class="sd">        Return:</span>
<span class="sd">            True if the Processor&#39;s Process has a `check` method, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">overridedMethods</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">AtConstants</span><span class="o">.</span><span class="n">CHECK</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">hasFixMethod</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter to know if the Processor&#39;s Process has a `fix` method.</span>

<span class="sd">        Return:</span>
<span class="sd">            True if the Processor&#39;s Process has a `fix` method, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">overridedMethods</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">AtConstants</span><span class="o">.</span><span class="n">FIX</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">hasToolMethod</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Lazy getter to know if the Processor&#39;s Process has a `tool` method.</span>

<span class="sd">        Return:</span>
<span class="sd">            True if the Processor&#39;s Process has a `tool` method, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">overridedMethods</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">AtConstants</span><span class="o">.</span><span class="n">TOOL</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rawName</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter fore the Processor&#39;s Process raw name.</span>

<span class="sd">        Return:</span>
<span class="sd">            The name for the Processor&#39;s Process, this will fallback to the class name if no `_name_` is set.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">processClass</span><span class="o">.</span><span class="n">_name_</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">processClass</span><span class="o">.</span><span class="vm">__name__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">isEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Processor&#39;s state.</span>
<span class="sd">        </span>
<span class="sd">        Return:</span>
<span class="sd">            `True` if the Processor is enabled, `False` Otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isEnabled</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">isCheckable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Processor&#39;s checkable state.</span>
<span class="sd">        </span>
<span class="sd">        Return:</span>
<span class="sd">            `True` if the Processor is checkable, `False` Otherwise. </span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isCheckable</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">isFixable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Processor&#39;s fixable state.</span>
<span class="sd">        </span>
<span class="sd">        Return:</span>
<span class="sd">            `True` if the Processor is fixable, `False` Otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isFixable</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">inUi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for Processor&#39;s UI state.</span>

<span class="sd">        Return:</span>
<span class="sd">            `True` if the Processor can be run in UI mode, `False` Otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__inUi</span>
    
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">inBatch</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for Processor&#39;s batch state.</span>

<span class="sd">        Return:</span>
<span class="sd">            `True` if the Processor can be run in batch mode, `False` Otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__inBatch</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">isNonBlocking</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter to know whether the Processor&#39;s Process FailStatus are blocking or not.</span>

<span class="sd">        Return:</span>
<span class="sd">            `False` if the Processor&#39;s Process FailStatus are blocking, `True` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isNonBlocking</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">category</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the Processor&#39;s category.</span>

<span class="sd">        Return:</span>
<span class="sd">            The Processor&#39;s category name.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_category</span>

<div class="viewcode-block" id="Processor.getArguments">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.getArguments">[docs]</a>
    <span class="k">def</span> <span class="nf">getArguments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve arguments values for the given method of the Processor&#39;s Process.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            method: The method name as str for which to retrieve the arguments and keyword arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple containing a list of arguments values and a dict of keyword arguments values.</span>

<span class="sd">        Notes:</span>
<span class="sd">            This method will not raise any error, if no argument is found, return a tuple containing empty</span>
<span class="sd">            list and empty dict.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">arguments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arguments</span>
        <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">([],</span> <span class="p">{})</span>

        <span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">arguments</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">([],</span> <span class="p">{})</span>

        <span class="k">return</span> <span class="n">arguments</span></div>


<div class="viewcode-block" id="Processor.getSetting">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.getSetting">[docs]</a>
    <span class="k">def</span> <span class="nf">getSetting</span><span class="p">(</span><span class="n">setting</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the value for a specific setting if it exists.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            setting: The setting to get from the Processor&#39;s settings.</span>
<span class="sd">            default: The default value to return if the Processor does not have any value for this setting.</span>

<span class="sd">        Return:</span>
<span class="sd">            The value for the requested setting or the default value if the requested setting does not exists.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">setting</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span></div>


<div class="viewcode-block" id="Processor.getLowestFailStatus">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.getLowestFailStatus">[docs]</a>
    <span class="k">def</span> <span class="nf">getLowestFailStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">FailStatus</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the lowest Fail status from all :class:`~Thread` from the Processor&#39;s Process.</span>

<span class="sd">        Return:</span>
<span class="sd">            The Lowest Fail Status of the Processor&#39;s Process accross all it&#39;s :class:`~Thread`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="nb">sorted</span><span class="p">((</span><span class="n">thread</span><span class="o">.</span><span class="n">_failStatus</span> <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_threads</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">_priority</span><span class="p">)),</span> <span class="kc">None</span><span class="p">)</span></div>


<div class="viewcode-block" id="Processor.getLowestSuccessStatus">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.getLowestSuccessStatus">[docs]</a>
    <span class="k">def</span> <span class="nf">getLowestSuccessStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">SuccessStatus</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the lowest Success status from all :class:`~Thread` from the Processor&#39;s Process.</span>

<span class="sd">        Return:</span>
<span class="sd">            The Lowest Success Status of the Processor&#39;s Process accross all it&#39;s :class:`~Thread`</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="nb">sorted</span><span class="p">((</span><span class="n">thread</span><span class="o">.</span><span class="n">_successStatus</span> <span class="k">for</span> <span class="n">thread</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_threads</span><span class="o">.</span><span class="n">values</span><span class="p">()),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">_priority</span><span class="p">)),</span> <span class="kc">None</span><span class="p">)</span></div>


<div class="viewcode-block" id="Processor.check">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.check">[docs]</a>
    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">links</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">doProfiling</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">FeedbackContainer</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This is a wrapper for the Processor&#39;s Process `check`.</span>

<span class="sd">        This will automatically execute the `check` method with it&#39;s right parameters and profile the execution if requested. </span>
<span class="sd">        If the `links` attribute is set to `True`, the Processor&#39;s :class:`~Link` will also be executed..</span>

<span class="sd">        Parameters:</span>
<span class="sd">            links: Should the wrapper launch the connected links or not.</span>
<span class="sd">            doProfiling: Whether the `check` method must be run with the Processor&#39;s Profiler.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All feedback containers for the Processor&#39;s Process post check.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasCheckMethod</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        
        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getArguments</span><span class="p">(</span><span class="n">AtConstants</span><span class="o">.</span><span class="n">CHECK</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">doProfiling</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_processProfile</span><span class="o">.</span><span class="n">profileMethod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">check</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">check</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exception</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">links</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">runLinks</span><span class="p">(</span><span class="n">Link</span><span class="o">.</span><span class="n">CHECK</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">getFeedbackContainers</span><span class="p">()</span></div>


<div class="viewcode-block" id="Processor.fix">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.fix">[docs]</a>
    <span class="k">def</span> <span class="nf">fix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">links</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">doProfiling</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">FeedbackContainer</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This is a wrapper for the Processor&#39;s Process `fix`.</span>

<span class="sd">        This will automatically execute the `fix` method with it&#39;s right parameters and profile the execution if requested. </span>
<span class="sd">        If the `links` attribute is set to `True`, the Processor&#39;s :class:`~Link` will also be executed..</span>

<span class="sd">        Parameters:</span>
<span class="sd">            links: Should the wrapper launch the connected links or not.</span>
<span class="sd">            doProfiling: Whether the `fix` method must be run with the Processor&#39;s Profiler.</span>

<span class="sd">        Returns:</span>
<span class="sd">            All feedback containers for the Processor&#39;s Process post fix.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasFixMethod</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getArguments</span><span class="p">(</span><span class="n">AtConstants</span><span class="o">.</span><span class="n">FIX</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">doProfiling</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_processProfile</span><span class="o">.</span><span class="n">profileMethod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">fix</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">fix</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">links</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">runLinks</span><span class="p">(</span><span class="n">Link</span><span class="o">.</span><span class="n">FIX</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">getFeedbackContainers</span><span class="p">()</span></div>


<div class="viewcode-block" id="Processor.tool">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.tool">[docs]</a>
    <span class="k">def</span> <span class="nf">tool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">links</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">doProfiling</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This is a wrapper for the Processor&#39;s Process `tool`.</span>

<span class="sd">        This will automatically execute the `tool` method with it&#39;s right parameters and profile the execution if requested.</span>
<span class="sd">        If the `links` attribute is set to `True`, the Processor&#39;s :class:`~Link` will also be executed..</span>

<span class="sd">        Parameters:</span>
<span class="sd">            links: Should the wrapper launch the connected links or not.</span>
<span class="sd">            doProfiling: Whether the `tool` method must be run with the Processor&#39;s Profiler.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The value returned by the Processor&#39;s Process `tool` method. Usually, `None`, but it could be the tool widget</span>
<span class="sd">            so it can be parented to the UI this Processor&#39;s is runt from.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasToolMethod</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getArguments</span><span class="p">(</span><span class="n">AtConstants</span><span class="o">.</span><span class="n">TOOL</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">doProfiling</span><span class="p">:</span>
                <span class="n">returnValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processProfile</span><span class="o">.</span><span class="n">profileMethod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">tool</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">returnValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">tool</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">links</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">runLinks</span><span class="p">(</span><span class="n">Link</span><span class="o">.</span><span class="n">TOOL</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">returnValue</span></div>


<div class="viewcode-block" id="Processor.runLinks">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.runLinks">[docs]</a>
    <span class="k">def</span> <span class="nf">runLinks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">which</span><span class="p">:</span> <span class="n">Link</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Execute the Processor&#39;s links for the given :class:`~Link`.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            which: Which link we want to run.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__linksData</span><span class="p">[</span><span class="n">which</span><span class="p">]:</span>
            <span class="n">link</span><span class="p">()</span></div>


<div class="viewcode-block" id="Processor.getParameter">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.getParameter">[docs]</a>
    <span class="k">def</span> <span class="nf">getParameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">:</span> <span class="n">Parameter</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the value for the given :class:`~Parameter` object.</span>

<span class="sd">        Return:</span>
<span class="sd">            The current value for the given :class:`~Parameter` object.</span>

<span class="sd">        Notes:</span>
<span class="sd">            Python descriptors are defined on classes but hold different values per instance of the class that owns them, for</span>
<span class="sd">            this reason, we can&#39;t query the value from the :class:`~Parameter` itself. This method query the value as it knows both the</span>
<span class="sd">            class that own the :class:`~Parameter` and the instance for which we want the value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">parameter</span><span class="o">.</span><span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">processClass</span><span class="p">)</span></div>


<div class="viewcode-block" id="Processor.setParameter">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.setParameter">[docs]</a>
    <span class="k">def</span> <span class="nf">setParameter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">:</span> <span class="n">Parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the given value to the given :class:`~Parameter` object.</span>

<span class="sd">        Return:</span>
<span class="sd">            The current value for the given :class:`~Parameter` object after being set. This allows to know the exact value the attribute</span>
<span class="sd">            was set on after it does it&#39;s validation.</span>

<span class="sd">        Notes:</span>
<span class="sd">            Python descriptors are defined on classes but hold different values per instance of the class that owns them, for</span>
<span class="sd">            this reason, we can&#39;t set the value from the :class:`~Parameter` itself. This method query the value as it knows both the</span>
<span class="sd">            class that own the :class:`~Parameter` and the instance for which we want to set the value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">parameter</span><span class="o">.</span><span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getParameter</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span></div>


<div class="viewcode-block" id="Processor.setupTags">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.setupTags">[docs]</a>
    <span class="k">def</span> <span class="nf">setupTags</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Setup the tags used by this Processor to modify the it&#39;s behaviour.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__isEnabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isCheckable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasCheckMethod</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isFixable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasFixMethod</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__hasTool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasToolMethod</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__isNonBlocking</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__inBatch</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__inUi</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tags</span>

        <span class="k">if</span> <span class="n">tags</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">tags</span> <span class="o">&amp;</span> <span class="n">Tag</span><span class="o">.</span><span class="n">DISABLED</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__isEnabled</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">tags</span> <span class="o">&amp;</span> <span class="n">Tag</span><span class="o">.</span><span class="n">NO_CHECK</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__isCheckable</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">tags</span> <span class="o">&amp;</span> <span class="n">Tag</span><span class="o">.</span><span class="n">NO_FIX</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__isFixable</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">tags</span> <span class="o">&amp;</span> <span class="n">Tag</span><span class="o">.</span><span class="n">NO_TOOL</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__hasTool</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">tags</span> <span class="o">&amp;</span> <span class="n">Tag</span><span class="o">.</span><span class="n">NON_BLOCKING</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__isNonBlocking</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="n">tags</span> <span class="o">&amp;</span> <span class="n">Tag</span><span class="o">.</span><span class="n">NO_BATCH</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__inBatch</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">tags</span> <span class="o">&amp;</span> <span class="n">Tag</span><span class="o">.</span><span class="n">NO_UI</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__inUi</span> <span class="o">=</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="Processor.resolveLinks">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.resolveLinks">[docs]</a>
    <span class="k">def</span> <span class="nf">resolveLinks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
        <span class="n">linkedObjects</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="n">Processor</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span> 
        <span class="n">check</span><span class="p">:</span> <span class="n">Link</span> <span class="o">=</span> <span class="n">AtConstants</span><span class="o">.</span><span class="n">CHECK</span><span class="p">,</span> 
        <span class="n">fix</span><span class="p">:</span> <span class="n">Link</span> <span class="o">=</span> <span class="n">AtConstants</span><span class="o">.</span><span class="n">FIX</span><span class="p">,</span> 
        <span class="n">tool</span><span class="p">:</span> <span class="n">Link</span> <span class="o">=</span> <span class="n">AtConstants</span><span class="o">.</span><span class="n">TOOL</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolve the links between the given objects and the current Processor.</span>

<span class="sd">        This need to be called with an ordered list of :class:`~Processor` or None for :class:`~Processor` to skip.</span>
<span class="sd">        (e.g. to skip those that should not be linked because they dont have to be run in batch or ui.)</span>

<span class="sd">        Parameters:</span>
<span class="sd">            linkedObjects: List of all objects used to resolve the current Processor&#39;s links. Objects to skip have to be replaced with `None`.</span>
<span class="sd">            check: Name of the method to use as check link on the given objects.</span>
<span class="sd">            fix: Name of the method to use as fix link on the given objects.</span>
<span class="sd">            tool: Name of the method to use as tool link on the given objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__linksData</span> <span class="o">=</span> <span class="n">linksData</span> <span class="o">=</span> <span class="p">{</span><span class="n">Link</span><span class="o">.</span><span class="n">CHECK</span><span class="p">:</span> <span class="p">[],</span> <span class="n">Link</span><span class="o">.</span><span class="n">FIX</span><span class="p">:</span> <span class="p">[],</span> <span class="n">Link</span><span class="o">.</span><span class="n">TOOL</span><span class="p">:</span> <span class="p">[]}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">linkedObjects</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">links</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_links</span>
        <span class="k">if</span> <span class="n">links</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">links</span><span class="p">:</span>
            <span class="n">id_</span><span class="p">,</span> <span class="n">_driver</span><span class="p">,</span> <span class="n">_driven</span> <span class="o">=</span> <span class="n">link</span>
            <span class="k">if</span> <span class="n">linkedObjects</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">driven</span> <span class="o">=</span> <span class="n">_driven</span>
            <span class="n">driven</span> <span class="o">=</span> <span class="n">check</span> <span class="k">if</span> <span class="n">_driven</span> <span class="ow">is</span> <span class="n">Link</span><span class="o">.</span><span class="n">CHECK</span> <span class="k">else</span> <span class="n">driven</span>
            <span class="n">driven</span> <span class="o">=</span> <span class="n">fix</span> <span class="k">if</span> <span class="n">_driven</span> <span class="ow">is</span> <span class="n">Link</span><span class="o">.</span><span class="n">FIX</span> <span class="k">else</span> <span class="n">driven</span>
            <span class="n">driven</span> <span class="o">=</span> <span class="n">tool</span> <span class="k">if</span> <span class="n">_driven</span> <span class="ow">is</span> <span class="n">Link</span><span class="o">.</span><span class="n">TOOL</span> <span class="k">else</span> <span class="n">driven</span>

            <span class="n">linksData</span><span class="p">[</span><span class="n">_driver</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">linkedObjects</span><span class="p">[</span><span class="n">id_</span><span class="p">],</span> <span class="n">driven</span><span class="p">))</span></div>


    <span class="k">def</span> <span class="nf">_overrideStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
        <span class="n">process</span><span class="p">:</span> <span class="n">Process</span><span class="p">,</span> 
        <span class="n">overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">AtStatus</span><span class="o">.</span><span class="n">FailStatus</span><span class="p">],</span> <span class="n">Type</span><span class="p">[</span><span class="n">AtStatus</span><span class="o">.</span><span class="n">SuccessStatus</span><span class="p">]],</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">Status</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Override the Processor&#39;s Process&#39; Threads Statuses based on a dict of overrides.</span>

<span class="sd">        Will iter through all Processor&#39;s Process&#39; Threads and do the overrides from the dict by replacing the Fail</span>
<span class="sd">        or Success Statuses.</span>

<span class="sd">        Parameters: </span>
<span class="sd">            process: The Processor&#39;s Process instance.</span>
<span class="sd">            overrides: The Status Overrides data, define the new FailStatus and/or the new SuccessStatus.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#FIXME: It&#39;s highly likely that this override the statuses owned by the class.</span>
        <span class="c1"># This is an issue if we need to  add the process twice.</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">overrides</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">threadName</span><span class="p">,</span> <span class="n">overridesDict</span> <span class="ow">in</span> <span class="n">overrides</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">process</span><span class="p">,</span> <span class="n">threadName</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Process </span><span class="si">{0}</span><span class="s1"> have no thread named </span><span class="si">{1}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">process</span><span class="o">.</span><span class="n">_name_</span><span class="p">,</span> <span class="n">threadName</span><span class="p">))</span>
            <span class="n">thread</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">process</span><span class="p">,</span> <span class="n">threadName</span><span class="p">)</span>
            
            <span class="c1"># Get the fail overrides for the current name</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">overridesDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">AtStatus</span><span class="o">.</span><span class="n">FailStatus</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">FailStatus</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Fail feedback status override for </span><span class="si">{0}</span><span class="s1"> &quot;</span><span class="si">{1}</span><span class="s1">&quot; must be an instance or subclass of </span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">process</span><span class="o">.</span><span class="n">_name_</span><span class="p">,</span>
                        <span class="n">threadName</span><span class="p">,</span>
                        <span class="n">AtStatus</span><span class="o">.</span><span class="n">FailStatus</span>
                    <span class="p">))</span>
                <span class="n">thread</span><span class="o">.</span><span class="n">overrideFailStatus</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
            
            <span class="c1"># Get the success overrides for the current name</span>
            <span class="n">status</span> <span class="o">=</span> <span class="n">overridesDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">AtStatus</span><span class="o">.</span><span class="n">SuccessStatus</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">status</span><span class="p">,</span> <span class="n">AtStatus</span><span class="o">.</span><span class="n">SuccessStatus</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Success feedback status override for </span><span class="si">{0}</span><span class="s1"> &quot;</span><span class="si">{1}</span><span class="s1">&quot; must be an instance or subclass of </span><span class="si">{2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">process</span><span class="o">.</span><span class="n">_name_</span><span class="p">,</span>
                        <span class="n">threadName</span><span class="p">,</span>
                        <span class="n">AtStatus</span><span class="o">.</span><span class="n">SuccessStatus</span>
                    <span class="p">))</span>
                <span class="n">thread</span><span class="o">.</span><span class="n">overrideSuccessStatus</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>

<div class="viewcode-block" id="Processor.setProgressbar">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.setProgressbar">[docs]</a>
    <span class="k">def</span> <span class="nf">setProgressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progressbar</span><span class="p">:</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QProgressBar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the ProgressBar object in the UI to be used by the Processor&#39;s Process.</span>

<span class="sd">        Made to be called in the ui this method allow to give access to the progress bar in the Processor&#39;s Process to </span>
<span class="sd">        give feedback on the execution progress while performing `check` and/or `fix`.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            progressbar: ProgressBar object object to connect to the process to display check and fix progression.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">setProgressbar</span><span class="p">(</span><span class="n">progressbar</span><span class="p">)</span></div>


<div class="viewcode-block" id="Processor.getData">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.getData">[docs]</a>
    <span class="k">def</span> <span class="nf">getData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the Processor&#39;s Data for the given key or default value if key does not exists.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            key: The key to get the data from.</span>
<span class="sd">            default: The default value to return if the key does not exists.</span>

<span class="sd">        Return:</span>
<span class="sd">            The value at the given key in the Processor&#39;s data if the key exists. Else the default value is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span></div>


<div class="viewcode-block" id="Processor.setData">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.setData">[docs]</a>
    <span class="k">def</span> <span class="nf">setData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the Processor&#39;s Data for the given key</span>

<span class="sd">        Parameters:</span>
<span class="sd">            key: The key to set the data for.</span>
<span class="sd">            value: The value to store as data for the given key.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div>


<div class="viewcode-block" id="Processor.interupt">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Processor.interupt">[docs]</a>
    <span class="k">def</span> <span class="nf">interupt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register user interuption for the Processor&#39;s Process&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">_registerInteruption</span><span class="p">()</span></div>
</div>



<span class="c1">#TODO: Improve the mechanic with `typeCast` and `validate`, maybe include other method to validate type as well.</span>
<span class="c1"># Also consider having an `abc.abstractproperty` for the type instead of the class constant to force implementation in </span>
<span class="c1"># sub-classes.</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="Parameter">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Parameter">[docs]</a>
<span class="k">class</span> <span class="nc">Parameter</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Athena Parameter descriptor that represent a variable value to be used in an Athena :class:`~Process`</span>

<span class="sd">    The Parameter is a python descriptor object that must be defined at the class level. It require a value that will be </span>
<span class="sd">    used both as it&#39;s default value and it&#39;s current value until it&#39;s changed.</span>
<span class="sd">    The purpose of using a Parameter is to have a variable value the user can tweak to modify how the Process behave.</span>
<span class="sd">    It&#39;s possible to implement different subtype of Parameter to manage different Python types, for this, it&#39;s important</span>
<span class="sd">    to implement 2 methods so the Parameter can convert an input value (usually a string) and validate that this value is</span>
<span class="sd">    correct.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">TYPE</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">T</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Represent the type of the Parameter and is used for type casting in the :meth:`~Parameter.typeCast` method&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a new instance of Parameter.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            default: The default value for the current Parameter. Will be set as default and current value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__default</span><span class="p">:</span> <span class="n">T</span> <span class="o">=</span> <span class="n">default</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__value</span><span class="p">:</span> <span class="n">T</span> <span class="o">=</span> <span class="n">default</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">__name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">__set_name__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Process</span><span class="p">],</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Mangle the name of the Parameter into the class.</span>
<span class="sd">        </span>
<span class="sd">        Set a private argument on the class to hold the Parameter&#39;s default value.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            owner: Class object that own the Parameter.</span>
<span class="sd">            name: Name of the parameter (name of the parameter attribute on the class)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__name</span> <span class="o">=</span> <span class="s1">&#39;__&#39;</span> <span class="o">+</span> <span class="n">name</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">owner</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__default</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Process</span><span class="p">],</span> <span class="n">owner</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Process</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Descriptor getter for the Parameter value.</span>

<span class="sd">        Get the unique Parameter value for the given instance of the owner class.</span>
<span class="sd">        If no instance of the owner class is passed, the Parameter instance is returned</span>
<span class="sd">        instead to allow internal manipulation.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            instance: The instance for which we want to get the Parameter value.</span>
<span class="sd">            owner: The class that owns the Parameter object.</span>

<span class="sd">        Return:</span>
<span class="sd">            The Parameter&#39;s current value for the given instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Process</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Descriptor setter for the Parameter value.</span>

<span class="sd">        Cast the given value to the right Parameter&#39;s type (:attr:`~Parameter.TYPE`) using the</span>
<span class="sd">        :meth:`~Parameter.typeCast` method and then, if the value can be validate with the </span>
<span class="sd">        :meth:`~Parameter.validate` method, the value is set for the Parameter on the given instance.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            instance: The instance for which we want to set the Parameter value.</span>
<span class="sd">            value: The new value to set the Parameter&#39;s value to.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">castValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeCast</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">castValue</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name</span><span class="p">,</span> <span class="n">castValue</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delete__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="n">Process</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Descriptor deleter for the Parameter.</span>

<span class="sd">        When deleted, reset te parameter to it&#39;s default value.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            instance: The instance for which we want reset the Parameter value to default.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">setattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__default</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Parameter&#39;s nice name.</span>

<span class="sd">        Basically, as the name is mangled, remove the 2 leading underscores.</span>

<span class="sd">        Return:</span>
<span class="sd">            The Parameter&#39;s nice name without leading underscores.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Getter for the Parameter&#39;s default value.</span>

<span class="sd">        Return:</span>
<span class="sd">            The Parameter&#39;s default value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__default</span>

<div class="viewcode-block" id="Parameter.typeCast">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Parameter.typeCast">[docs]</a>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">typeCast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">T</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cast the input value to the Parameter&#39;s type set in :attr:`~Parameter.TYPE`.</span>

<span class="sd">        This method is not implemented on the Parameter abstract base class, it needs to be implemented in </span>
<span class="sd">        each an every subclass that are meant to be instanciated and use in an Athena :class:`~Process`.</span>
<span class="sd">        The input may be of various type so this method should handle different case of type casting.</span>
<span class="sd">        To do so, you can use the the :attr:`~Parameter.TYPE` attribute to convert the input value to the desired type.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            value: The input value to convert to the Parameter&#39;s type.</span>

<span class="sd">        Raise:</span>
<span class="sd">            NotImplementedError: This is an abstract method of an abstract base class, it needs to be implemented in subclasses.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>


<div class="viewcode-block" id="Parameter.validate">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.Parameter.validate">[docs]</a>
    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that the input value is accepted and therefore can be set to the Parameter&#39;s value.</span>

<span class="sd">        This method is meant to validate that the given value is an acceptable value for the Parameter.</span>
<span class="sd">        For basic Parameter, this test can simply return True, making all values of the Parameter&#39;s Type acceptable.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            value: The value of the Parameter&#39;s type to validate.</span>

<span class="sd">        Raise:</span>
<span class="sd">            NotImplementedError: This is an abstract method of an abstract base class, it needs to be implemented in subclasses.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="BoolParameter">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.BoolParameter">[docs]</a>
<span class="k">class</span> <span class="nc">BoolParameter</span><span class="p">(</span><span class="n">Parameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A concrete sub-type of Parameter that can be used to represent a boolean value.&quot;&quot;&quot;</span>

    <span class="n">TYPE</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a new instance of BoolParameter.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            default: The default boolean value for the Parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Value </span><span class="si">{}</span><span class="s1"> does not conform to </span><span class="si">{}</span><span class="s1"> validation.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">default</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">BoolParameter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>

<div class="viewcode-block" id="BoolParameter.typeCast">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.BoolParameter.typeCast">[docs]</a>
    <span class="k">def</span> <span class="nf">typeCast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cast the input value to the `bool` type.</span>
<span class="sd">        </span>
<span class="sd">        The casting is simple and support `bool`, `str` and `int`, all value of those type that can be considered `True`</span>
<span class="sd">        will return True, every other values will be considered False.</span>
<span class="sd">        The accepted values are:</span>
<span class="sd">            </span>
<span class="sd">            * bool: True</span>
<span class="sd">            * str: &#39;True&#39;, &#39;true&#39;, &#39;Yes&#39;, &#39;yes&#39;, &#39;ok&#39;, &#39;1&#39;</span>
<span class="sd">            * int: 1</span>

<span class="sd">        Parameters:</span>
<span class="sd">            value: The value to cast to `bool`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The input value evaluated as a boolean.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;True&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="s1">&#39;Yes&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="BoolParameter.validate">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.BoolParameter.validate">[docs]</a>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate that the given bool is valid.</span>

<span class="sd">        The given value is valid as long as it&#39;s a boolean.</span>

<span class="sd">        Parameter:</span>
<span class="sd">            value: The value to validate.</span>

<span class="sd">        Return:</span>
<span class="sd">            Whether or not the input value is valid. (If it&#39;s of the right type.)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="_NumberParameter">
<a class="viewcode-back" href="../../athena.html#athena.AtCore._NumberParameter">[docs]</a>
<span class="k">class</span> <span class="nc">_NumberParameter</span><span class="p">(</span><span class="n">Parameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A sub-type of Parameter that can be used to represent a numeric value.</span>
<span class="sd">    </span>
<span class="sd">    _NumberParameter is a protected class, only used internaly, it must not be instantiated due to the abstract nature</span>
<span class="sd">    of the `numbers.Number` type.</span>

<span class="sd">    Warning:</span>
<span class="sd">        This implementation of Parameter is not meant to be instantiated, use the following concrete implementations</span>
<span class="sd">        instead:</span>

<span class="sd">            * :class:`~IntParameter`</span>
<span class="sd">            * :class:`~FloatParameter`</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">TYPE</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">]</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
        <span class="n">default</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">,</span> 
        <span class="n">minimum</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
        <span class="n">maximum</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
        <span class="n">keepInRange</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a new instance of _NumberParameter.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            default: The default numeric value for the Parameter.</span>
<span class="sd">            minimum: The minimum value accepted for the Parameter. If None, no minimum limit is set.</span>
<span class="sd">            maximum: The maximum value accepted for the Parameter. If None, no maximum limit is set.</span>
<span class="sd">            keepInRange: Whether or not values below minimum or above maximum are forced to theses limits if they exceed them.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Value </span><span class="si">{}</span><span class="s1"> does not conform to </span><span class="si">{}</span><span class="s1"> validation.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">default</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">_NumberParameter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_minimum</span> <span class="o">=</span> <span class="n">minimum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_maximum</span> <span class="o">=</span> <span class="n">maximum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keepInRange</span> <span class="o">=</span> <span class="n">keepInRange</span>

<div class="viewcode-block" id="_NumberParameter.typeCast">
<a class="viewcode-back" href="../../athena.html#athena.AtCore._NumberParameter.typeCast">[docs]</a>
    <span class="k">def</span> <span class="nf">typeCast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cast the input value to the `numbers.Number` type.</span>
<span class="sd">        </span>
<span class="sd">        As the `numbers.Number` type is not instantiable, this method is meant to work wit sub-types that define an</span>
<span class="sd">        instantiable type for the :attr:`~Parameter.TYPE`.</span>
<span class="sd">        Will convert the input value to the Parameter&#39;s type and make sur it&#39;s in the range if the `keepInRange` attribute</span>
<span class="sd">        is set to `True`.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            value: The value to cast to the Parameter&#39;s type.</span>

<span class="sd">        Return:</span>
<span class="sd">            The input value converted to the Parameter&#39;s type.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keepInRange</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minimum</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minimum</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minimum</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maximum</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maximum</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maximum</span>

        <span class="k">return</span> <span class="n">value</span></div>


<div class="viewcode-block" id="_NumberParameter.validate">
<a class="viewcode-back" href="../../athena.html#athena.AtCore._NumberParameter.validate">[docs]</a>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Number</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate if the input numeric value is withing the Parameter&#39;s value range.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            value: The input value to validate.</span>

<span class="sd">        Return:</span>
<span class="sd">            Whether or not the value is withing the Parameter&#39;s range.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minimum</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minimum</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maximum</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maximum</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span></div>
</div>



<div class="viewcode-block" id="IntParameter">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.IntParameter">[docs]</a>
<span class="k">class</span> <span class="nc">IntParameter</span><span class="p">(</span><span class="n">_NumberParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A concrete sub-type of Parameter that can be used to represent an integer value.&quot;&quot;&quot;</span>

    <span class="n">TYPE</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span></div>



<div class="viewcode-block" id="FloatParameter">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.FloatParameter">[docs]</a>
<span class="k">class</span> <span class="nc">FloatParameter</span><span class="p">(</span><span class="n">_NumberParameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A concrete sub-type of Parameter that can be used to represent a floating point value.&quot;&quot;&quot;</span>

    <span class="n">TYPE</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span></div>



<div class="viewcode-block" id="StringParameter">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.StringParameter">[docs]</a>
<span class="k">class</span> <span class="nc">StringParameter</span><span class="p">(</span><span class="n">Parameter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A concrete sub-type of Parameter that can be used to represent a string value.&quot;&quot;&quot;</span>

    <span class="n">TYPE</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">validation</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">caseSensitive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a new instance of StringParameter.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            default: The default string value for the Parameter.</span>
<span class="sd">            validation: List of valid string the Parameter can have or None if all string are accepted.</span>
<span class="sd">            caseSensitive: Whether or not the string given in `validation` are case sensitive.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Value </span><span class="si">{}</span><span class="s1"> does not conform to </span><span class="si">{}</span><span class="s1"> validation.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">default</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">StringParameter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">default</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_validation</span> <span class="o">=</span> <span class="n">validation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_caseSensitive</span> <span class="o">=</span> <span class="n">caseSensitive</span>

<div class="viewcode-block" id="StringParameter.typeCast">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.StringParameter.typeCast">[docs]</a>
    <span class="k">def</span> <span class="nf">typeCast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Cast the input value to string.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            value: The input value to convert to the Parameter&#39;s type.</span>

<span class="sd">        Return:</span>
<span class="sd">            The string representation for the input value.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span></div>


<div class="viewcode-block" id="StringParameter.validate">
<a class="viewcode-back" href="../../athena.html#athena.AtCore.StringParameter.validate">[docs]</a>
    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate if the input value based on the validation if any.</span>

<span class="sd">        Parameters:</span>
<span class="sd">            value: The input value to validate.</span>

<span class="sd">        Return:</span>
<span class="sd">            Whether or not the input value respect the validation if any, else True.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_caseSensitive</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">{</span><span class="n">validation</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">validation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validation</span><span class="p">}</span>

        <span class="k">return</span> <span class="kc">False</span></div>
</div>



<div class="viewcode-block" id="_ProcessProfile">
<a class="viewcode-back" href="../../athena.html#athena.AtCore._ProcessProfile">[docs]</a>
<span class="k">class</span> <span class="nc">_ProcessProfile</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Profiler that allow to profile the execution of `athena.AtCore.Process`&quot;&quot;&quot;</span>

    <span class="c1"># Match integers, floats (comma or dot) and slash in case there is a separation for primitive calls.</span>
    <span class="n">DIGIT_PATTERN</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;([0-9,.\/]+)&#39;</span>
    <span class="n">DIGIT_REGEX</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">Pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">DIGIT_PATTERN</span><span class="p">)</span>

    <span class="n">CATEGORIES</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="s1">&#39;ncalls&#39;</span><span class="p">,</span> <span class="s1">&#39;Number of calls. Multiple numbers (e.g. 3/1) means the function recursed. it reads: Calls / Primitive Calls.&#39;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;tottime&#39;</span><span class="p">,</span> <span class="s1">&#39;Total time spent in the function (excluding time spent in calls to sub-functions).&#39;</span><span class="p">),</span> 
        <span class="p">(</span><span class="s1">&#39;percall&#39;</span><span class="p">,</span> <span class="s1">&#39;Quotient of tottime divided by ncalls.&#39;</span><span class="p">),</span> 
        <span class="p">(</span><span class="s1">&#39;cumtime&#39;</span><span class="p">,</span> <span class="s1">&#39;Cumulative time spent in this and all subfunctions (from invocation till exit). This figure is accurate even for recursive functions.&#39;</span><span class="p">),</span> 
        <span class="p">(</span><span class="s1">&#39;percall&#39;</span><span class="p">,</span> <span class="s1">&#39;Quotient of cumtime divided by primitive calls.&#39;</span><span class="p">),</span> 
        <span class="p">(</span><span class="s1">&#39;filename:lineno(function)&#39;</span><span class="p">,</span> <span class="s1">&#39;Data for each function.&#39;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialiste a Process Profiler and define the default instance attributes.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_profiles</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="o">...</span><span class="p">]]]]</span> <span class="o">=</span> <span class="p">{}</span> 

<div class="viewcode-block" id="_ProcessProfile.get">
<a class="viewcode-back" href="../../athena.html#athena.AtCore._ProcessProfile.get">[docs]</a>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a profile log from the given key, or default if key does not exists.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            key: The key to get data from in the profiler&#39;s profile data.</span>
<span class="sd">            default: The default value to return in case the key does not exists.</span>

<span class="sd">        Return:</span>
<span class="sd">            The data stored at the given key if exists else the default value is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_profiles</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_getCallDataList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callData</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Format and split `cProfile.Profiler` call data list (each value in the list must be one line.)</span>

<span class="sd">        This will mostly remove heading or trailing spaces and return a list of tuple where each values in the</span>
<span class="sd">        string is now an entry in the tuple. The order is the same than `athena.AtCore._ProcessProfile.CATEGORIES`.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            callData: Call entries from a `cProfile.Profiler` run.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">dataList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">call</span> <span class="ow">in</span> <span class="n">callData</span><span class="p">:</span>
            <span class="n">callData</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="n">filteredData</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">call</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filteredData</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">callData</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">filteredData</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span>

            <span class="n">value</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">filteredData</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">filteredData</span><span class="p">)])</span>
            <span class="n">callData</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="k">else</span> <span class="n">value</span><span class="p">)</span>

            <span class="n">dataList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">callData</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">dataList</span>

<div class="viewcode-block" id="_ProcessProfile.profileMethod">
<a class="viewcode-back" href="../../athena.html#athena.AtCore._ProcessProfile.profileMethod">[docs]</a>
    <span class="k">def</span> <span class="nf">profileMethod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="n">FunctionType</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Profile the given method execution and return it&#39;s result. The profiling result will be stored in the </span>
<span class="sd">        object.</span>

<span class="sd">        Try to execute the given method with the given args and kwargs and write the result in a temporary file.</span>
<span class="sd">        The result will then be read and each line splited to save a dict in the object `_profiles` attribute using</span>
<span class="sd">        the name of the given method as key.</span>
<span class="sd">        This dict will hold information like the time when the profiling was done (key = `time`, it can allow to not </span>
<span class="sd">        update data in a ui for instance), the total number of calls and obviously a tuple with each call data (`calls`).</span>
<span class="sd">        The raw stats result is also saved under the `rawStats` key if the user want to use it directly.</span>
<span class="sd">        </span>
<span class="sd">        Parameters:</span>
<span class="sd">            method: A callable for which we want to profile the execution and save new data.</span>
<span class="sd">            *args: The arguments to call the method with.</span>
<span class="sd">            **kwargs: The keyword arguments to call the method with.</span>

<span class="sd">        Return:</span>
<span class="sd">            The result of the given method with the provided args and kwargs.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="nb">callable</span><span class="p">(</span><span class="n">method</span><span class="p">),</span> <span class="s1">&#39;`method` must be passed a callable argument.&#39;</span>

        <span class="n">profile</span> <span class="o">=</span> <span class="n">cProfile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span>

        <span class="c1"># Run the method with `cProfile.Profile.runcall` to profile it&#39;s execution only. We define exception before</span>
        <span class="c1"># executing it, if an exception occur the except statement will be processed and `exception` will be updated</span>
        <span class="c1"># from `None` to the exception that should be raised.</span>
        <span class="c1"># At the end of this method exception must be raised in case it should be catch at upper leve in the code.</span>
        <span class="c1"># This allow to not skip the profiling even if an exception occurred. Of course the profiling will not be complete</span>
        <span class="c1"># But there should be all information from the beginning of the method to the exception. May be usefull for debugging.</span>
        <span class="n">exception</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">returnValue</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">returnValue</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">runcall</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_profiles</span><span class="p">[</span><span class="n">method</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getStatsFromProfile</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">returnValue</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exception_</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_profiles</span><span class="p">[</span><span class="n">method</span><span class="o">.</span><span class="vm">__name__</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getStatsFromProfile</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
            <span class="k">raise</span></div>


<div class="viewcode-block" id="_ProcessProfile.getStatsFromProfile">
<a class="viewcode-back" href="../../athena.html#athena.AtCore._ProcessProfile.getStatsFromProfile">[docs]</a>
    <span class="k">def</span> <span class="nf">getStatsFromProfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="n">cProfile</span><span class="o">.</span><span class="n">Profile</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="o">...</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Create a temp file and use it as a stream for the `pstats.Stats` This will allow us to open the file</span>
        <span class="c1"># and retrieve the stats as a string. With regex it&#39;s now possible to retrieve all the data in a displayable format</span>
        <span class="c1"># for any user interface.</span>
        <span class="n">fd</span><span class="p">,</span> <span class="n">tmpFile</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkstemp</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tmpFile</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">statStream</span><span class="p">:</span>
                <span class="n">stats</span> <span class="o">=</span> <span class="n">pstats</span><span class="o">.</span><span class="n">Stats</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">statStream</span><span class="p">)</span>
                <span class="n">stats</span><span class="o">.</span><span class="n">sort_stats</span><span class="p">(</span><span class="s1">&#39;cumulative&#39;</span><span class="p">)</span>  <span class="c1"># cumulative will use the `cumtime` to order stats, seems the most relevant.</span>
                <span class="n">stats</span><span class="o">.</span><span class="n">print_stats</span><span class="p">()</span>
            
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">tmpFile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">statStream</span><span class="p">:</span>
                <span class="n">statsStr</span> <span class="o">=</span> <span class="n">statStream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># No matter what happen, we want to delete the file.</span>
            <span class="c1"># It happen that the file is not closed here on Windows so we also call `os.close` to ensure it is really closed.</span>
            <span class="c1"># WindowsError: [Error 32] The process cannot access the file because it is being used by another process: ...</span>
            <span class="n">os</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tmpFile</span><span class="p">)</span>

        <span class="n">split</span> <span class="o">=</span> <span class="n">statsStr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">methodProfile</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>  <span class="c1"># With this we will be able to not re-generate widget (for instance) if data have not been updated.</span>
            <span class="s1">&#39;calls&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getCallDataList</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>
            <span class="s1">&#39;rawStats&#39;</span><span class="p">:</span> <span class="n">statsStr</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># Take care of possible primitive calls in the summary for `ncalls`.</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DIGIT_REGEX</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">methodProfile</span><span class="p">[</span><span class="s1">&#39;tottime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">summary</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">summary</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">methodProfile</span><span class="p">[</span><span class="s1">&#39;ncalls&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">summary</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">summary</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">methodProfile</span><span class="p">[</span><span class="s1">&#39;ncalls&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">summary</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">methodProfile</span></div>
</div>


        

<span class="c1"># Setup</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">import sys</span>
<span class="sd">sys.path.append(&#39;C:\Python27\Lib\site-packages&#39;)</span>
<span class="sd">sys.path.append(&#39;C:\Workspace\athena\src&#39;)</span>

<span class="sd">import athena.ressources.athena_example.ContextExample</span>

<span class="sd">import athena</span>
<span class="sd">athena._reload(__name__)</span>

<span class="sd">athena.launch(dev=True)</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Gregory Pijat.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>